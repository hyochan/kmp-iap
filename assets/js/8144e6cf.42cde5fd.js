"use strict";(self.webpackChunkkmp_iap_docs=self.webpackChunkkmp_iap_docs||[]).push([[5096],{1280:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>p,contentTitle:()=>o,default:()=>u,frontMatter:()=>a,metadata:()=>c,toc:()=>l});var t=i(4848),r=i(8453),s=i(5159);const a={sidebar_position:2},o="Quick Start",c={id:"getting-started/quickstart",title:"Quick Start",description:"Get up and running with KMP IAP in just a few minutes!",source:"@site/versioned_docs/version-1.0.0-beta/getting-started/quickstart.md",sourceDirName:"getting-started",slug:"/getting-started/quickstart",permalink:"/kmp-iap/docs/1.0.0-beta/getting-started/quickstart",draft:!1,unlisted:!1,editUrl:"https://github.com/hyochan/kmp-iap/tree/main/docs/versioned_docs/version-1.0.0-beta/getting-started/quickstart.md",tags:[],version:"1.0.0-beta",sidebarPosition:2,frontMatter:{sidebar_position:2}},p={},l=[{value:"Choose Your Approach",id:"choose-your-approach",level:2},{value:"Option 1: Global Instance (Simple)",id:"option-1-global-instance-simple",level:3},{value:"Option 2: Create Your Own Instance (Recommended for Testing)",id:"option-2-create-your-own-instance-recommended-for-testing",level:3},{value:"Basic Implementation",id:"basic-implementation",level:2},{value:"Using Global Instance",id:"using-global-instance",level:3},{value:"Using Your Own Instance",id:"using-your-own-instance",level:3},{value:"Using with Instance Creation",id:"using-with-instance-creation",level:2},{value:"Using with Compose Multiplatform",id:"using-with-compose-multiplatform",level:2},{value:"Platform-Specific Notes",id:"platform-specific-notes",level:2},{value:"Android",id:"android",level:3},{value:"iOS",id:"ios",level:3},{value:"Next Steps",id:"next-steps",level:2}];function d(n){const e={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.h1,{id:"quick-start",children:"Quick Start"}),"\n",(0,t.jsx)(s.A,{}),"\n",(0,t.jsx)(e.p,{children:"Get up and running with KMP IAP in just a few minutes!"}),"\n",(0,t.jsx)(e.admonition,{title:"Version",type:"info",children:(0,t.jsxs)(e.p,{children:["This guide covers ",(0,t.jsx)(e.strong,{children:"v1.0.0-rc"})," with simplified API. For v1.0.0-rc, see the ",(0,t.jsx)(e.a,{href:"/blog/2025/08/20/rc1-simplified-api",children:"migration guide"}),"."]})}),"\n",(0,t.jsx)(e.h2,{id:"choose-your-approach",children:"Choose Your Approach"}),"\n",(0,t.jsx)(e.p,{children:"KMP IAP supports two usage patterns:"}),"\n",(0,t.jsx)(e.h3,{id:"option-1-global-instance-simple",children:"Option 1: Global Instance (Simple)"}),"\n",(0,t.jsxs)(e.p,{children:["Use the pre-created ",(0,t.jsx)(e.code,{children:"kmpIapInstance"})," for convenience and simplicity."]}),"\n",(0,t.jsx)(e.h3,{id:"option-2-create-your-own-instance-recommended-for-testing",children:"Option 2: Create Your Own Instance (Recommended for Testing)"}),"\n",(0,t.jsxs)(e.p,{children:["Create your own ",(0,t.jsx)(e.code,{children:"KmpIAP()"})," instances for better control, testing, or dependency injection."]}),"\n",(0,t.jsx)(e.h2,{id:"basic-implementation",children:"Basic Implementation"}),"\n",(0,t.jsx)(e.h3,{id:"using-global-instance",children:"Using Global Instance"}),"\n",(0,t.jsx)(e.p,{children:"Here's a complete example using the global instance:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-kotlin",children:'import io.github.hyochan.kmpiap.kmpIapInstance\nimport io.github.hyochan.kmpiap.types.*\nimport kotlinx.coroutines.*\n\nclass IAPManager {\n    private val scope = CoroutineScope(Dispatchers.Main)\n\n    suspend fun initialize() {\n        try {\n            // Initialize connection using global instance\n            kmpIapInstance.initConnection()\n\n            // Listen to purchase updates\n            scope.launch {\n                kmpIapInstance.purchaseUpdatedListener.collect { purchase ->\n                    handlePurchaseUpdate(purchase)\n                }\n            }\n\n            // Listen to errors\n            scope.launch {\n                kmpIapInstance.purchaseErrorListener.collect { error ->\n                    handlePurchaseError(error)\n                }\n            }\n        } catch (e: Exception) {\n            println("Initialization failed: ${e.message}")\n        }\n    }\n\n    suspend fun loadProducts() {\n        try {\n            // v1.0.0-rc - simplified API\n            val products = kmpIapInstance.requestProducts(\n                skus = listOf("product_1", "product_2"),\n                type = ProductType.INAPP\n            )\n            println("Loaded ${products.size} products")\n        } catch (e: Exception) {\n            println("Failed to load products: ${e.message}")\n        }\n    }\n\n    suspend fun purchaseProduct(productId: String) {\n        try {\n            // v1.0.0-rc - simplified API (just SKU)\n            val purchase = kmpIapInstance.requestPurchase(sku = productId)\n            println("Purchase initiated for: ${purchase.productId}")\n        } catch (e: Exception) {\n            println("Purchase failed: ${e.message}")\n        }\n    }\n\n    private suspend fun handlePurchaseUpdate(purchase: Purchase) {\n        // Verify purchase with your backend\n        val isValid = verifyPurchaseWithBackend(purchase)\n\n        if (isValid) {\n            // Grant the purchased content\n            grantPurchase(purchase)\n\n            // Finish the transaction\n            kmpIapInstance.finishTransaction(\n                purchase = purchase,\n                isConsumable = isConsumableProduct(purchase.productId)\n            )\n        }\n    }\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"using-your-own-instance",children:"Using Your Own Instance"}),"\n",(0,t.jsx)(e.p,{children:"Here's the same example creating your own instance:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-kotlin",children:'import io.github.hyochan.kmpiap.KmpIAP\nimport io.github.hyochan.kmpiap.types.*\nimport kotlinx.coroutines.*\n\nclass IAPManager {\n    private val kmpIAP = KmpIAP()\n    private val scope = CoroutineScope(Dispatchers.Main)\n\n    suspend fun initialize() {\n        try {\n            // Initialize connection using instance\n            kmpIAP.initConnection()\n\n            // Listen to purchase updates\n            scope.launch {\n                kmpIAP.purchaseUpdatedListener.collect { purchase ->\n                    handlePurchaseUpdate(purchase)\n                }\n            }\n\n            // Listen to errors\n            scope.launch {\n                kmpIAP.purchaseErrorListener.collect { error ->\n                    handlePurchaseError(error)\n                }\n            }\n        } catch (e: Exception) {\n            println("Initialization failed: ${e.message}")\n        }\n    }\n\n    suspend fun loadProducts() {\n        try {\n            // Load in-app products - v1.0.0-rc simplified API\n            val products = kmpIAP.requestProducts(\n                skus = listOf("remove_ads", "premium_upgrade"),\n                type = ProductType.INAPP\n            )\n\n            products.forEach { product ->\n                println("Product: ${product.id} - ${product.price}")\n            }\n        } catch (e: Exception) {\n            println("Failed to load products: ${e.message}")\n        }\n    }\n\n    suspend fun purchaseProduct(productId: String) {\n        try {\n            // Request purchase - v1.0.0-rc simplified API\n            val purchase = kmpIAP.requestPurchase(sku = productId)\n            // Purchase will be handled in purchaseUpdatedListener\n        } catch (e: Exception) {\n            println("Purchase request failed: ${e.message}")\n        }\n    }\n\n    private suspend fun handlePurchaseUpdate(purchase: Purchase) {\n        // IMPORTANT: Server-side receipt validation should be performed here\n        // val isValid = validateReceiptOnServer(purchase.transactionReceipt)\n\n        // For this example, we\'ll assume validation passed\n        val isValid = true\n\n        if (isValid) {\n            // Deliver the product\n            deliverProduct(purchase.productId)\n\n            // Finish the transaction\n            kmpIAP.finishTransaction(\n                purchase = purchase,\n                isConsumable = true // true for consumables, false for subscriptions\n            )\n        }\n    }\n\n    private fun handlePurchaseError(error: PurchaseError) {\n        when (error.code) {\n            ErrorCode.E_USER_CANCELLED.name -> {\n                println("User cancelled the purchase")\n            }\n            ErrorCode.E_ITEM_UNAVAILABLE.name -> {\n                println("Item is not available")\n            }\n            else -> {\n                println("Purchase failed: ${error.message}")\n            }\n        }\n    }\n\n    private fun deliverProduct(productId: String) {\n        // Implement your product delivery logic\n        println("Product delivered: $productId")\n    }\n\n    fun disconnect() {\n        kmpIAP.endConnection()\n        scope.cancel()\n    }\n}\n'})}),"\n",(0,t.jsx)(e.h2,{id:"using-with-instance-creation",children:"Using with Instance Creation"}),"\n",(0,t.jsx)(e.p,{children:"For cases where you need more control (like testing or dependency injection):"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-kotlin",children:"import io.github.hyochan.kmpiap.KmpIAP\nimport io.github.hyochan.kmpiap.types.*\n\nclass IAPService(private val kmpIAP: KmpIAP = KmpIAP()) {\n\n    suspend fun initialize() {\n        // Initialize with your own instance\n        kmpIAP.initConnection()\n\n        // Set up listeners\n        launch {\n            kmpIAP.purchaseUpdatedListener.collect { purchase ->\n                // Handle purchase\n            }\n        }\n    }\n\n    suspend fun purchaseItem(productId: String) {\n        // v1.0.0-rc - simplified API\n        val purchase = kmpIAP.requestPurchase(sku = productId)\n\n        // Validate and finish transaction\n        kmpIAP.finishTransaction(purchase, isConsumable = true)\n    }\n}\n"})}),"\n",(0,t.jsx)(e.h2,{id:"using-with-compose-multiplatform",children:"Using with Compose Multiplatform"}),"\n",(0,t.jsx)(e.p,{children:"Here's how to use KMP IAP in a Compose Multiplatform app:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-kotlin",children:'import androidx.compose.runtime.*\nimport androidx.compose.material3.*\nimport io.github.hyochan.kmpiap.KmpIAP\nimport io.github.hyochan.kmpiap.types.*\n\n@Composable\nfun StoreScreen() {\n    // Create instance for this screen\n    val kmpIAP = remember { KmpIAP() }\n\n    var products by remember { mutableStateOf<List<Product>>(emptyList()) }\n    var isLoading by remember { mutableStateOf(false) }\n\n    LaunchedEffect(Unit) {\n        // Initialize connection\n        kmpIAP.initConnection()\n\n        // Load products\n        isLoading = true\n        try {\n            // v1.0.0-rc - simplified API\n            products = kmpIAP.requestProducts(\n                skus = listOf("product_1", "product_2"),\n                type = ProductType.INAPP\n            )\n        } finally {\n            isLoading = false\n        }\n\n        // Listen for purchases\n        launch {\n            kmpIAP.purchaseUpdatedListener.collect { purchase ->\n                // Handle successful purchase\n                kmpIAP.finishTransaction(purchase, isConsumable = true)\n            }\n        }\n    }\n\n    Column {\n        products.forEach { product ->\n            Card(\n                onClick = {\n                    // Purchase product\n                    scope.launch {\n                        // v1.0.0-rc - simplified API\n                        kmpIAP.requestPurchase(sku = product.id)\n                    }\n                }\n            ) {\n                Text("${product.title} - ${product.price}")\n            }\n        }\n    }\n}\n'})}),"\n",(0,t.jsx)(e.h2,{id:"platform-specific-notes",children:"Platform-Specific Notes"}),"\n",(0,t.jsx)(e.h3,{id:"android",children:"Android"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Make sure your app is signed with the release key when testing"}),"\n",(0,t.jsx)(e.li,{children:"Upload your app to Google Play Console (at least to internal testing)"}),"\n",(0,t.jsx)(e.li,{children:"Add test accounts in Google Play Console"}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"ios",children:"iOS"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Test with sandbox accounts during development"}),"\n",(0,t.jsx)(e.li,{children:"Use StoreKit configuration files for local testing"}),"\n",(0,t.jsx)(e.li,{children:"Remember to handle promotional offers if needed"}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["Learn about ",(0,t.jsx)(e.a,{href:"/kmp-iap/docs/1.0.0-beta/guides/basic-setup",children:"Basic Setup"})]}),"\n",(0,t.jsxs)(e.li,{children:["Understand ",(0,t.jsx)(e.a,{href:"/kmp-iap/docs/1.0.0-beta/guides/purchases",children:"Purchase Flow"})]}),"\n",(0,t.jsxs)(e.li,{children:["Master ",(0,t.jsx)(e.a,{href:"/kmp-iap/docs/1.0.0-beta/guides/lifecycle",children:"Purchase Lifecycle"})]}),"\n",(0,t.jsxs)(e.li,{children:["Check ",(0,t.jsx)(e.a,{href:"/kmp-iap/docs/1.0.0-beta/guides/troubleshooting",children:"Troubleshooting"})]}),"\n"]})]})}function u(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(d,{...n})}):d(n)}},5159:(n,e,i)=>{i.d(e,{A:()=>a});i(6540);var t=i(6025),r=i(7856),s=i(4848);function a({className:n="iapkit-banner",style:e}){const i=(0,t.A)("/img/iapkit-banner.gif");return(0,s.jsx)("div",{className:n,style:e,children:(0,s.jsx)("a",{href:r.V,target:"_blank",rel:"noopener noreferrer",onClick:async()=>{try{await fetch(r.I,{method:"POST",mode:"no-cors"})}catch(n){console.error("Failed to track banner click:",n)}},style:{display:"block",textAlign:"center",marginBottom:"20px",textDecoration:"none",cursor:"pointer"},children:(0,s.jsx)("img",{src:i,alt:"IAPKit - In-App Purchase Made Simple",style:{height:"auto",borderRadius:"8px",objectFit:"contain"}})})})}},7856:(n,e,i)=>{i.d(e,{I:()=>r,V:()=>t});const t="https://iapkit.com",r="https://www.hyo.dev/api/ad-banner/cmjf0l20n0002249hjrwmgob3"},8453:(n,e,i)=>{i.d(e,{R:()=>a,x:()=>o});var t=i(6540);const r={},s=t.createContext(r);function a(n){const e=t.useContext(s);return t.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:a(n.components),t.createElement(s.Provider,{value:e},n.children)}}}]);