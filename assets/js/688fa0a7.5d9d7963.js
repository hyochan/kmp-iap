"use strict";(self.webpackChunkkmp_iap_docs=self.webpackChunkkmp_iap_docs||[]).push([[2667],{5966:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>o});var i=a(4848),r=a(8453);const t={slug:"release-1.3.0",title:"1.3.0 - PurchaseState Cleanup & API Consolidation",authors:["hyochan"],tags:["release","minor","breaking-change"],description:"KMP-IAP 1.3.0 reflects OpenIAP updates - PurchaseState simplified and BillingProgramAndroid consolidated.",date:new Date("2025-12-29T00:00:00.000Z")},l="KMP-IAP 1.3.0",s={permalink:"/kmp-iap/blog/release-1.3.0",editUrl:"https://github.com/hyochan/kmp-iap/tree/main/docs/blog/2025-12-29-release-1.3.0.md",source:"@site/blog/2025-12-29-release-1.3.0.md",title:"1.3.0 - PurchaseState Cleanup & API Consolidation",description:"KMP-IAP 1.3.0 reflects OpenIAP updates - PurchaseState simplified and BillingProgramAndroid consolidated.",date:"2025-12-29T00:00:00.000Z",formattedDate:"December 29, 2025",tags:[{label:"release",permalink:"/kmp-iap/blog/tags/release"},{label:"minor",permalink:"/kmp-iap/blog/tags/minor"},{label:"breaking-change",permalink:"/kmp-iap/blog/tags/breaking-change"}],readingTime:.965,hasTruncateMarker:!0,authors:[{name:"Hyo",title:"Maintainer of kmp-iap",url:"https://github.com/hyochan",imageURL:"https://github.com/hyochan.png",key:"hyochan"}],frontMatter:{slug:"release-1.3.0",title:"1.3.0 - PurchaseState Cleanup & API Consolidation",authors:["hyochan"],tags:["release","minor","breaking-change"],description:"KMP-IAP 1.3.0 reflects OpenIAP updates - PurchaseState simplified and BillingProgramAndroid consolidated.",date:"2025-12-29T00:00:00.000Z"},unlisted:!1,prevItem:{title:"1.3.2 - Android Product Status Codes & Type Updates",permalink:"/kmp-iap/blog/release-1.3.2"},nextItem:{title:"1.2.2 - External Payments Support (Japan)",permalink:"/kmp-iap/blog/release-1.2.2"}},d={authorsImageUrls:[void 0]},o=[{value:"Breaking Changes",id:"breaking-changes",level:2},{value:"PurchaseState Simplified",id:"purchasestate-simplified",level:3},{value:"API Consolidation: BillingProgramAndroid",id:"api-consolidation-billingprogramandroid",level:3},{value:"RequestPurchaseProps.useAlternativeBilling Deprecated",id:"requestpurchasepropsusealternativebilling-deprecated",level:3},{value:"Installation",id:"installation",level:2},{value:"References",id:"references",level:2}];function c(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["This release reflects the ",(0,i.jsx)(n.a,{href:"https://www.openiap.dev/docs/updates/notes#gql-1-3-11-google-1-3-21-apple-1-3-9",children:"OpenIAP gql v1.3.11 / google v1.3.21 / apple v1.3.9"})," updates."]}),"\n",(0,i.jsx)(n.h2,{id:"breaking-changes",children:"Breaking Changes"}),"\n",(0,i.jsx)(n.h3,{id:"purchasestate-simplified",children:"PurchaseState Simplified"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-kotlin",children:"// Before (v1.2.x)\nenum class PurchaseState {\n    Pending, Purchased, Failed, Restored, Deferred, Unknown\n}\n\n// After (v1.3.0)\nenum class PurchaseState {\n    Pending, Purchased, Unknown\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Migration:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-kotlin",children:"// Before\nwhen (purchase.purchaseState) {\n    PurchaseState.Purchased, PurchaseState.Restored -> handleSuccess()\n    PurchaseState.Pending, PurchaseState.Deferred -> handlePending()\n    PurchaseState.Failed -> handleFailure()\n    else -> {}\n}\n\n// After\nwhen (purchase.purchaseState) {\n    PurchaseState.Purchased -> handleSuccess()\n    PurchaseState.Pending -> handlePending()\n    PurchaseState.Unknown -> {}\n}\n// Handle failures via purchaseErrorListener\n"})}),"\n",(0,i.jsx)(n.h3,{id:"api-consolidation-billingprogramandroid",children:"API Consolidation: BillingProgramAndroid"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"AlternativeBillingModeAndroid"})," deprecated. Use ",(0,i.jsx)(n.code,{children:"BillingProgramAndroid"})," with ",(0,i.jsx)(n.code,{children:"enableBillingProgramAndroid"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-kotlin",children:"// Before (deprecated)\nval config = InitConnectionConfig(\n    alternativeBillingModeAndroid = AlternativeBillingModeAndroid.UserChoice\n)\n\n// After (recommended)\nval config = InitConnectionConfig(\n    enableBillingProgramAndroid = BillingProgramAndroid.UserChoiceBilling\n)\n"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Before (Deprecated)"}),(0,i.jsx)(n.th,{children:"After (Recommended)"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"alternativeBillingModeAndroid: USER_CHOICE"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"enableBillingProgramAndroid: USER_CHOICE_BILLING"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"alternativeBillingModeAndroid: ALTERNATIVE_ONLY"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"enableBillingProgramAndroid: EXTERNAL_OFFER"})})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"requestpurchasepropsusealternativebilling-deprecated",children:"RequestPurchaseProps.useAlternativeBilling Deprecated"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"useAlternativeBilling"})," field is deprecated - it only logged debug info and had no effect on the purchase flow."]}),"\n",(0,i.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-kotlin",children:'implementation("io.github.hyochan:kmp-iap:1.3.0")\n'})}),"\n",(0,i.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://www.openiap.dev/docs/updates/notes#gql-1-3-11-google-1-3-21-apple-1-3-9",children:"OpenIAP Update Notes"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/blog/release-1.2.2",children:"1.2.2 Release Notes"})," - Previous release"]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/docs/api/types",children:"API Reference - Types"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,n,a)=>{a.d(n,{R:()=>l,x:()=>s});var i=a(6540);const r={},t=i.createContext(r);function l(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);