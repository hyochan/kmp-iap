"use strict";(self.webpackChunkkmp_iap_docs=self.webpackChunkkmp_iap_docs||[]).push([[1156],{5159:(e,n,i)=>{i.d(n,{A:()=>l});i(6540);var r=i(6025),s=i(7856),a=i(4848);function l({className:e="iapkit-banner",style:n}){const i=(0,r.A)("/img/iapkit-banner.gif");return(0,a.jsx)("div",{className:e,style:n,children:(0,a.jsx)("a",{href:s.V,target:"_blank",rel:"noopener noreferrer",onClick:async()=>{try{await fetch(s.I,{method:"POST",mode:"no-cors"})}catch(e){console.error("Failed to track banner click:",e)}},style:{display:"block",textAlign:"center",marginBottom:"20px",textDecoration:"none",cursor:"pointer"},children:(0,a.jsx)("img",{src:i,alt:"IAPKit - In-App Purchase Made Simple",style:{height:"auto",borderRadius:"8px",objectFit:"contain"}})})})}},7856:(e,n,i)=>{i.d(n,{I:()=>s,V:()=>r});const r="https://iapkit.com",s="https://www.hyo.dev/api/ad-banner/cmjf0l20n0002249hjrwmgob3"},8401:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>u,frontMatter:()=>l,metadata:()=>t,toc:()=>c});var r=i(4848),s=i(8453),a=i(5159);const l={title:"Types",sidebar_position:2},o="Types",t={id:"api/types",title:"Types",description:"Comprehensive type definitions for kmp-iap v1.0.0-rc following OpenIAP specification. All types are fully documented with Kotlin data classes for complete type safety and cross-platform compatibility.",source:"@site/versioned_docs/version-1.2.0/api/types.md",sourceDirName:"api",slug:"/api/types",permalink:"/kmp-iap/docs/1.2.0/api/types",draft:!1,unlisted:!1,editUrl:"https://github.com/hyochan/kmp-iap/tree/main/docs/versioned_docs/version-1.2.0/api/types.md",tags:[],version:"1.2.0",sidebarPosition:2,frontMatter:{title:"Types",sidebar_position:2},sidebar:"docsSidebar",previous:{title:"API Reference",permalink:"/kmp-iap/docs/1.2.0/api/"},next:{title:"Core Methods",permalink:"/kmp-iap/docs/1.2.0/api/core-methods"}},d={},c=[{value:"OpenIAP Base Interfaces",id:"openiap-base-interfaces",level:2},{value:"ProductCommon (OpenIAP Base)",id:"productcommon-openiap-base",level:3},{value:"PurchaseCommon (OpenIAP Base)",id:"purchasecommon-openiap-base",level:3},{value:"Platform-Specific Implementations",id:"platform-specific-implementations",level:2},{value:"ProductIOS",id:"productios",level:3},{value:"ProductAndroid",id:"productandroid",level:3},{value:"PurchaseIOS",id:"purchaseios",level:3},{value:"PurchaseAndroid",id:"purchaseandroid",level:3},{value:"Type Aliases for Convenience",id:"type-aliases-for-convenience",level:2},{value:"Request Types (OpenIAP-Compliant)",id:"request-types-openiap-compliant",level:2},{value:"RequestPurchaseProps",id:"requestpurchaseprops",level:3},{value:"RequestPurchaseIosProps",id:"requestpurchaseiosprops",level:3},{value:"advancedCommerceData (v1.3.7)",id:"advancedcommercedata-v137",level:4},{value:"RequestPurchaseAndroidProps",id:"requestpurchaseandroidprops",level:3},{value:"RequestSubscriptionProps",id:"requestsubscriptionprops",level:3},{value:"RequestSubscriptionIosProps",id:"requestsubscriptioniosprops",level:3},{value:"ActiveSubscription",id:"activesubscription",level:3},{value:"ProductRequest",id:"productrequest",level:3},{value:"iOS-Specific Types",id:"ios-specific-types",level:2},{value:"SubscriptionInfoIOS",id:"subscriptioninfoios",level:3},{value:"SubscriptionOfferPeriod",id:"subscriptionofferperiod",level:3},{value:"PaymentDiscountIOS",id:"paymentdiscountios",level:3},{value:"DiscountIOS",id:"discountios",level:3},{value:"Android-Specific Types",id:"android-specific-types",level:2},{value:"ProductAndroidOneTimePurchaseOfferDetail",id:"productandroidonetimepurchaseofferdetail",level:3},{value:"DiscountDisplayInfoAndroid",id:"discountdisplayinfoandroid",level:3},{value:"DiscountAmountAndroid",id:"discountamountandroid",level:3},{value:"LimitedQuantityInfoAndroid",id:"limitedquantityinfoandroid",level:3},{value:"ValidTimeWindowAndroid",id:"validtimewindowandroid",level:3},{value:"PreorderDetailsAndroid",id:"preorderdetailsandroid",level:3},{value:"RentalDetailsAndroid",id:"rentaldetailsandroid",level:3},{value:"ProductSubscriptionAndroidOfferDetail",id:"productsubscriptionandroidofferdetail",level:3},{value:"PricingPhaseAndroid",id:"pricingphaseandroid",level:3},{value:"SubscriptionOfferAndroid",id:"subscriptionofferandroid",level:3},{value:"RequestSubscriptionAndroidProps",id:"requestsubscriptionandroidprops",level:3},{value:"Enums",id:"enums",level:2},{value:"IapPlatform",id:"iapplatform",level:3},{value:"Store",id:"store",level:3},{value:"ProductType",id:"producttype",level:3},{value:"TransactionStateIOS",id:"transactionstateios",level:3},{value:"AndroidPurchaseState",id:"androidpurchasestate",level:3},{value:"SubscriptionPeriodUnitIOS",id:"subscriptionperiodunitios",level:3},{value:"DiscountPaymentModeIOS",id:"discountpaymentmodeios",level:3},{value:"DiscountTypeIOS",id:"discounttypeios",level:3},{value:"Billing Programs API Types (v1.2.0)",id:"billing-programs-api-types-v120",level:2},{value:"BillingProgram",id:"billingprogram",level:3},{value:"ExternalLinkLaunchMode",id:"externallinklaunchmode",level:3},{value:"ExternalLinkType",id:"externallinktype",level:3},{value:"LaunchExternalLinkParams",id:"launchexternallinkparams",level:3},{value:"BillingProgramAvailabilityResult",id:"billingprogramavailabilityresult",level:3},{value:"BillingProgramReportingDetails",id:"billingprogramreportingdetails",level:3},{value:"Error Types (OpenIAP-Compliant)",id:"error-types-openiap-compliant",level:2},{value:"PurchaseError",id:"purchaseerror",level:3},{value:"ErrorCode",id:"errorcode",level:3},{value:"Validation Types",id:"validation-types",level:2},{value:"ValidationOptions",id:"validationoptions",level:3},{value:"IOSReceiptBody",id:"iosreceiptbody",level:3},{value:"ValidationResult",id:"validationresult",level:3},{value:"Utility Types",id:"utility-types",level:2},{value:"DeepLinkOptions",id:"deeplinkoptions",level:3},{value:"PurchaseOptions",id:"purchaseoptions",level:3},{value:"ConnectionResult",id:"connectionresult",level:3},{value:"Subscription",id:"subscription",level:3},{value:"Purchase Verification Types",id:"purchase-verification-types",level:2},{value:"VerifyPurchaseProps",id:"verifypurchaseprops",level:3},{value:"VerifyPurchaseAppleOptions",id:"verifypurchaseappleoptions",level:3},{value:"VerifyPurchaseGoogleOptions",id:"verifypurchasegoogleoptions",level:3},{value:"VerifyPurchaseHorizonOptions",id:"verifypurchasehorizonoptions",level:3},{value:"PurchaseVerificationProvider",id:"purchaseverificationprovider",level:3},{value:"VerifyPurchaseWithProviderProps",id:"verifypurchasewithproviderprops",level:3},{value:"IapkitPurchaseState",id:"iapkitpurchasestate",level:3},{value:"Usage Examples",id:"usage-examples",level:2},{value:"Cross-Platform Product Handling",id:"cross-platform-product-handling",level:3},{value:"Standardized Purchase Processing",id:"standardized-purchase-processing",level:3},{value:"Making Purchases with OpenIAP Request Structure",id:"making-purchases-with-openiap-request-structure",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Migration from Legacy Types",id:"migration-from-legacy-types",level:2},{value:"Type Aliases for Compatibility",id:"type-aliases-for-compatibility",level:3},{value:"Deprecated Field Migration",id:"deprecated-field-migration",level:3},{value:"See Also",id:"see-also",level:2}];function p(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"types",children:"Types"}),"\n",(0,r.jsx)(a.A,{}),"\n",(0,r.jsxs)(n.p,{children:["Comprehensive type definitions for kmp-iap v1.0.0-rc following ",(0,r.jsx)(n.a,{href:"https://openiap.dev",children:"OpenIAP specification"}),". All types are fully documented with Kotlin data classes for complete type safety and cross-platform compatibility."]}),"\n",(0,r.jsx)(n.h2,{id:"openiap-base-interfaces",children:"OpenIAP Base Interfaces"}),"\n",(0,r.jsx)(n.h3,{id:"productcommon-openiap-base",children:"ProductCommon (OpenIAP Base)"}),"\n",(0,r.jsx)(n.p,{children:"Base interface following OpenIAP specification for all product types."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:'interface ProductCommon {\n    val id: String              // Unified product identifier\n    val title: String           // Product title\n    val description: String     // Product description\n    val type: ProductType       // "inapp" or "subs"\n    val displayName: String?    // Optional display name\n    val displayPrice: String    // Formatted price for display\n    val currency: String        // ISO currency code\n    val price: Double?          // Numeric price value\n    val debugDescription: String?\n    val platform: String?      // Platform identifier\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"purchasecommon-openiap-base",children:"PurchaseCommon (OpenIAP Base)"}),"\n",(0,r.jsx)(n.p,{children:"Base interface following OpenIAP specification for all purchase types."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"interface PurchaseCommon {\n    val id: String              // Transaction identifier\n    val productId: String       // Product that was purchased\n    val ids: List<String>?      // Multiple product IDs (Android)\n    val transactionId: String?  // @deprecated - use id instead\n    val transactionDate: Double // Unix timestamp\n    val transactionReceipt: String\n    val purchaseToken: String?  // Unified token field\n    val platform: String?\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"platform-specific-implementations",children:"Platform-Specific Implementations"}),"\n",(0,r.jsx)(n.h3,{id:"productios",children:"ProductIOS"}),"\n",(0,r.jsx)(n.p,{children:"iOS product implementation with platform-specific fields."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:'data class ProductIOS(\n    // ProductCommon fields\n    override val id: String,\n    override val title: String,\n    override val description: String,\n    override val type: ProductType,\n    override val displayPrice: String,\n    override val currency: String,\n    override val price: Double?,\n    override val debugDescription: String?,\n    override val displayName: String?,\n    override val platform: String = "ios",\n\n    // iOS-specific fields\n    val displayNameIOS: String,\n    val isFamilyShareableIOS: Boolean,\n    val jsonRepresentationIOS: String,\n    val subscriptionInfoIOS: SubscriptionInfoIOS? = null\n) : ProductCommon\n'})}),"\n",(0,r.jsx)(n.h3,{id:"productandroid",children:"ProductAndroid"}),"\n",(0,r.jsx)(n.p,{children:"Android product implementation with Google Play Billing fields."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:'data class ProductAndroid(\n    // ProductCommon fields\n    override val id: String,\n    override val title: String,\n    override val description: String,\n    override val type: ProductType,\n    override val displayPrice: String,\n    override val currency: String,\n    override val price: Double?,\n    override val debugDescription: String?,\n    override val displayName: String?,\n    override val platform: String = "android",\n\n    // Android-specific fields\n    val nameAndroid: String,\n    val oneTimePurchaseOfferDetailsAndroid: List<ProductAndroidOneTimePurchaseOfferDetail>? = null,\n    val subscriptionOfferDetailsAndroid: List<ProductSubscriptionAndroidOfferDetail>? = null\n) : ProductCommon\n'})}),"\n",(0,r.jsx)(n.h3,{id:"purchaseios",children:"PurchaseIOS"}),"\n",(0,r.jsx)(n.p,{children:"iOS purchase implementation with StoreKit fields."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:'data class PurchaseIOS(\n    // PurchaseCommon fields\n    override val id: String,\n    override val productId: String,\n    override val ids: List<String>? = null,\n    override val transactionId: String? = null,  // @deprecated\n    override val transactionDate: Double,\n    override val transactionReceipt: String,\n    override val purchaseToken: String? = null,\n    override val platform: String = "ios",\n\n    // iOS-specific fields\n    val jwsRepresentationIOS: String? = null,\n    val originalTransactionDateIOS: Double? = null,\n    val originalTransactionIdentifierIOS: String? = null,\n    val transactionState: TransactionStateIOS? = null\n) : PurchaseCommon\n'})}),"\n",(0,r.jsx)(n.h3,{id:"purchaseandroid",children:"PurchaseAndroid"}),"\n",(0,r.jsx)(n.p,{children:"Android purchase implementation with Google Play Billing fields."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:'data class PurchaseAndroid(\n    // PurchaseCommon fields\n    override val id: String,\n    override val productId: String,\n    override val ids: List<String>? = null,\n    override val transactionId: String? = null,  // @deprecated\n    override val transactionDate: Double,\n    override val transactionReceipt: String,\n    override val purchaseToken: String? = null,\n    override val platform: String = "android",\n\n    // Android-specific fields\n    val purchaseStateAndroid: AndroidPurchaseState? = null,\n    val acknowledgedAndroid: Boolean? = null,\n    val autoRenewingAndroid: Boolean? = null,\n    val obfuscatedAccountIdAndroid: String? = null,\n    val obfuscatedProfileIdAndroid: String? = null,\n    val orderIdAndroid: String? = null,\n    val packageNameAndroid: String? = null,\n    val purchaseTimeAndroid: Double? = null,\n    val purchaseTokenAndroid: String? = null,  // @deprecated\n    val signatureAndroid: String? = null,\n    // New in v1.2.0 (Google Play Billing 8.1.0+)\n    val isSuspendedAndroid: Boolean? = null   // Subscription suspended due to payment issues\n) : PurchaseCommon\n'})}),"\n",(0,r.jsxs)(n.admonition,{title:"Handling Suspended Subscriptions (v1.2.0)",type:"tip",children:[(0,r.jsxs)(n.p,{children:["When ",(0,r.jsx)(n.code,{children:"isSuspendedAndroid"})," is ",(0,r.jsx)(n.code,{children:"true"}),", the subscription is suspended due to payment issues. Direct users to fix their payment method:"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"if (purchase.isSuspendedAndroid == true) {\n    // Show UI to direct user to fix payment method\n    showPaymentIssueDialog()\n}\n"})})]}),"\n",(0,r.jsx)(n.h2,{id:"type-aliases-for-convenience",children:"Type Aliases for Convenience"}),"\n",(0,r.jsx)(n.p,{children:"OpenIAP-compliant type aliases for backward compatibility and ease of use."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"// Union types\ntypealias Product = ProductCommon\ntypealias Purchase = PurchaseCommon\ntypealias SubscriptionProduct = ProductCommon\ntypealias ProductPurchase = PurchaseCommon\ntypealias SubscriptionPurchase = PurchaseCommon\n"})}),"\n",(0,r.jsx)(n.h2,{id:"request-types-openiap-compliant",children:"Request Types (OpenIAP-Compliant)"}),"\n",(0,r.jsx)(n.h3,{id:"requestpurchaseprops",children:"RequestPurchaseProps"}),"\n",(0,r.jsx)(n.p,{children:"OpenIAP-compliant purchase request structure with platform-specific options."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"data class RequestPurchaseProps(\n    val ios: RequestPurchaseIosProps? = null,\n    val android: RequestPurchaseAndroidProps? = null\n)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"requestpurchaseiosprops",children:"RequestPurchaseIosProps"}),"\n",(0,r.jsx)(n.p,{children:"iOS-specific purchase request parameters."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"data class RequestPurchaseIosProps(\n    val sku: String,\n    val andDangerouslyFinishTransactionAutomatically: Boolean? = null,\n    val appAccountToken: String? = null,\n    val quantity: Int? = null,\n    val withOffer: PaymentDiscountIOS? = null,\n    // New in v1.3.7 (openiap-apple)\n    val advancedCommerceData: String? = null\n)\n"})}),"\n",(0,r.jsx)(n.h4,{id:"advancedcommercedata-v137",children:"advancedCommerceData (v1.3.7)"}),"\n",(0,r.jsxs)(n.p,{children:["Support for StoreKit 2's ",(0,r.jsx)(n.code,{children:"Product.PurchaseOption.custom"})," API to pass attribution data during purchases."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Use Cases"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Campaign attribution tracking"}),"\n",(0,r.jsx)(n.li,{children:"Affiliate marketing integration"}),"\n",(0,r.jsx)(n.li,{children:"Promotional code tracking"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Example"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:'kmpIapInstance.requestPurchase {\n    ios {\n        sku = "com.example.premium"\n        advancedCommerceData = "campaign_summer_2025"\n    }\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["The data is formatted as JSON internally: ",(0,r.jsx)(n.code,{children:'{"signatureInfo": {"token": "<value>"}}'})]}),"\n",(0,r.jsx)(n.h3,{id:"requestpurchaseandroidprops",children:"RequestPurchaseAndroidProps"}),"\n",(0,r.jsx)(n.p,{children:"Android-specific purchase request parameters."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"data class RequestPurchaseAndroidProps(\n    val skus: List<String>,\n    val obfuscatedAccountIdAndroid: String? = null,\n    val obfuscatedProfileIdAndroid: String? = null,\n    val isOfferPersonalized: Boolean? = null\n)\n"})}),"\n",(0,r.jsxs)(n.admonition,{title:"google field support (v1.3.15)",type:"info",children:[(0,r.jsxs)(n.p,{children:["Starting from openiap-google v1.3.15, you can use the ",(0,r.jsx)(n.code,{children:"google"})," field instead of ",(0,r.jsx)(n.code,{children:"android"})," for purchase requests. The ",(0,r.jsx)(n.code,{children:"android"})," field is still supported for backward compatibility but is deprecated."]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:'// Recommended (new)\nkmpIapInstance.requestPurchase {\n    google {\n        skus = listOf("sku_id")\n    }\n}\n\n// Still supported (deprecated)\nkmpIapInstance.requestPurchase {\n    android {\n        skus = listOf("sku_id")\n    }\n}\n'})})]}),"\n",(0,r.jsx)(n.h3,{id:"requestsubscriptionprops",children:"RequestSubscriptionProps"}),"\n",(0,r.jsx)(n.p,{children:"OpenIAP-compliant subscription request structure."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"data class RequestSubscriptionProps(\n    val ios: RequestSubscriptionIosProps? = null,\n    val android: RequestSubscriptionAndroidProps? = null\n)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"requestsubscriptioniosprops",children:"RequestSubscriptionIosProps"}),"\n",(0,r.jsxs)(n.p,{children:["iOS-specific subscription request parameters. Similar to ",(0,r.jsx)(n.code,{children:"RequestPurchaseIosProps"})," but for subscriptions."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"data class RequestSubscriptionIosProps(\n    val sku: String,\n    val andDangerouslyFinishTransactionAutomatically: Boolean? = null,\n    val appAccountToken: String? = null,\n    val quantity: Int? = null,\n    val withOffer: PaymentDiscountIOS? = null,\n    // New in v1.3.7 (openiap-apple)\n    val advancedCommerceData: String? = null\n)\n"})}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"advancedCommerceData"})," field works the same way as in ",(0,r.jsx)(n.code,{children:"RequestPurchaseIosProps"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"activesubscription",children:"ActiveSubscription"}),"\n",(0,r.jsx)(n.p,{children:"Represents an active subscription with platform-specific details following OpenIAP specification."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:'data class ActiveSubscription(\n    val productId: String,                    // Product identifier\n    val isActive: Boolean,                    // Always true for active subscriptions\n\n    // iOS-specific fields\n    val expirationDateIOS: Long? = null,      // Expiration timestamp (iOS only)\n    val environmentIOS: String? = null,       // "Sandbox" | "Production" (iOS only)\n    val daysUntilExpirationIOS: Int? = null,  // Days remaining until expiration (iOS only)\n\n    // Android-specific fields\n    val autoRenewingAndroid: Boolean? = null, // Auto-renewal status (Android only)\n\n    // Cross-platform fields\n    val willExpireSoon: Boolean? = null       // True if expiring within 7 days\n)\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Platform-Specific Behavior"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"iOS"}),": Provides exact expiration dates, environment info, and calculated days until expiration"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Android"}),": Provides auto-renewal status. When ",(0,r.jsx)(n.code,{children:"false"}),", the subscription will not renew"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Cross-platform"}),": ",(0,r.jsx)(n.code,{children:"willExpireSoon"})," warns if subscription expires within 7 days"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Use Cases"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Feature gating based on subscription status"}),"\n",(0,r.jsx)(n.li,{children:"Showing expiration warnings"}),"\n",(0,r.jsx)(n.li,{children:"Managing subscription renewals"}),"\n",(0,r.jsx)(n.li,{children:"Environment-specific testing (iOS Sandbox vs Production)"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"productrequest",children:"ProductRequest"}),"\n",(0,r.jsx)(n.p,{children:"Request parameters for loading products."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"data class ProductRequest(\n    val skus: List<String>,\n    val type: ProductType\n)\n"})}),"\n",(0,r.jsx)(n.h2,{id:"ios-specific-types",children:"iOS-Specific Types"}),"\n",(0,r.jsx)(n.h3,{id:"subscriptioninfoios",children:"SubscriptionInfoIOS"}),"\n",(0,r.jsx)(n.p,{children:"iOS subscription information from StoreKit."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"data class SubscriptionInfoIOS(\n    val subscriptionGroupId: String,\n    val subscriptionPeriod: SubscriptionOfferPeriod\n)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"subscriptionofferperiod",children:"SubscriptionOfferPeriod"}),"\n",(0,r.jsx)(n.p,{children:"iOS subscription period definition."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:'data class SubscriptionOfferPeriod(\n    val unit: String,        // "DAY", "WEEK", "MONTH", "YEAR"\n    val value: Int           // Number of units\n)\n'})}),"\n",(0,r.jsx)(n.h3,{id:"paymentdiscountios",children:"PaymentDiscountIOS"}),"\n",(0,r.jsx)(n.p,{children:"iOS promotional offer payment discount."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"data class PaymentDiscountIOS(\n    val identifier: String,\n    val keyIdentifier: String,\n    val nonce: String,\n    val signature: String,\n    val timestamp: Double\n)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"discountios",children:"DiscountIOS"}),"\n",(0,r.jsx)(n.p,{children:"iOS product discount information."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"data class DiscountIOS(\n    val identifier: String,\n    val type: String,\n    val numberOfPeriods: String,\n    val price: String,\n    val localizedPrice: String,\n    val paymentMode: String,\n    val subscriptionPeriod: String\n)\n"})}),"\n",(0,r.jsx)(n.h2,{id:"android-specific-types",children:"Android-Specific Types"}),"\n",(0,r.jsx)(n.h3,{id:"productandroidonetimepurchaseofferdetail",children:"ProductAndroidOneTimePurchaseOfferDetail"}),"\n",(0,r.jsxs)(n.p,{children:["Android one-time purchase offer details from Google Play Billing. ",(0,r.jsx)(n.strong,{children:"Updated in v1.2.0"})," with discount support."]}),"\n",(0,r.jsxs)(n.admonition,{title:"Breaking Change (v1.2.0)",type:"warning",children:[(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"oneTimePurchaseOfferDetailsAndroid"})," is now a ",(0,r.jsx)(n.strong,{children:"List"})," instead of a single object to support multiple offers with discounts."]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"// Before (v1.0.0)\nval price = product.oneTimePurchaseOfferDetailsAndroid?.formattedPrice\n\n// After (v1.2.0)\nval price = product.oneTimePurchaseOfferDetailsAndroid?.firstOrNull()?.formattedPrice\n"})})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"data class ProductAndroidOneTimePurchaseOfferDetail(\n    val formattedPrice: String,\n    val priceAmountMicros: String,\n    val priceCurrencyCode: String,\n    // New fields in v1.2.0 (Google Play Billing 7.0+)\n    val offerId: String? = null,\n    val offerTags: List<String>? = null,\n    val offerToken: String? = null,\n    val discountDisplayInfo: DiscountDisplayInfoAndroid? = null,\n    val limitedQuantityInfo: LimitedQuantityInfoAndroid? = null,\n    val validTimeWindow: ValidTimeWindowAndroid? = null,\n    val preorderDetails: PreorderDetailsAndroid? = null,\n    val rentalDetails: RentalDetailsAndroid? = null\n)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"discountdisplayinfoandroid",children:"DiscountDisplayInfoAndroid"}),"\n",(0,r.jsx)(n.p,{children:"Display information for one-time product discounts (Google Play Billing 7.0+)."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"data class DiscountDisplayInfoAndroid(\n    val percentageDiscount: Int? = null,\n    val discountAmount: DiscountAmountAndroid? = null\n)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"discountamountandroid",children:"DiscountAmountAndroid"}),"\n",(0,r.jsx)(n.p,{children:"Discount amount details for Android."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"data class DiscountAmountAndroid(\n    val discountAmountMicros: String,\n    val formattedDiscountAmount: String\n)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"limitedquantityinfoandroid",children:"LimitedQuantityInfoAndroid"}),"\n",(0,r.jsx)(n.p,{children:"Limited quantity information for offers."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"data class LimitedQuantityInfoAndroid(\n    val maximumQuantity: Int,\n    val remainingQuantity: Int\n)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"validtimewindowandroid",children:"ValidTimeWindowAndroid"}),"\n",(0,r.jsx)(n.p,{children:"Validity period for offers."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"data class ValidTimeWindowAndroid(\n    val startTimeMillis: String,\n    val endTimeMillis: String\n)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"preorderdetailsandroid",children:"PreorderDetailsAndroid"}),"\n",(0,r.jsx)(n.p,{children:"Pre-order details for products (Google Play Billing 8.1.0+)."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"data class PreorderDetailsAndroid(\n    val preorderReleaseTimeMillis: String,\n    val preorderPresaleEndTimeMillis: String\n)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"rentaldetailsandroid",children:"RentalDetailsAndroid"}),"\n",(0,r.jsx)(n.p,{children:"Rental details for products."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"data class RentalDetailsAndroid(\n    val rentalPeriod: String,\n    val rentalExpirationPeriod: String? = null\n)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"productsubscriptionandroidofferdetail",children:"ProductSubscriptionAndroidOfferDetail"}),"\n",(0,r.jsx)(n.p,{children:"Android subscription offer details."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"data class ProductSubscriptionAndroidOfferDetail(\n    val basePlanId: String,\n    val offerId: String?,\n    val offerToken: String,\n    val pricingPhases: List<PricingPhaseAndroid>,\n    val offerTags: List<String>\n)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"pricingphaseandroid",children:"PricingPhaseAndroid"}),"\n",(0,r.jsx)(n.p,{children:"Android subscription pricing phase."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"data class PricingPhaseAndroid(\n    val formattedPrice: String,\n    val priceCurrencyCode: String,\n    val billingPeriod: String,\n    val billingCycleCount: Int,\n    val priceAmountMicros: String,\n    val recurrenceMode: Int\n)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"subscriptionofferandroid",children:"SubscriptionOfferAndroid"}),"\n",(0,r.jsx)(n.p,{children:"Android subscription offer for purchase requests."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"data class SubscriptionOfferAndroid(\n    val basePlanId: String,\n    val offerId: String?,\n    val offerToken: String\n)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"requestsubscriptionandroidprops",children:"RequestSubscriptionAndroidProps"}),"\n",(0,r.jsx)(n.p,{children:"Android-specific subscription request parameters."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"data class RequestSubscriptionAndroidProps(\n    val skus: List<String>,\n    val obfuscatedAccountIdAndroid: String? = null,\n    val obfuscatedProfileIdAndroid: String? = null,\n    val isOfferPersonalized: Boolean? = null,\n    val purchaseTokenAndroid: String? = null,\n    val replacementModeAndroid: Int? = null,\n    val subscriptionOffers: List<SubscriptionOfferAndroid>\n)\n"})}),"\n",(0,r.jsx)(n.h2,{id:"enums",children:"Enums"}),"\n",(0,r.jsx)(n.h3,{id:"iapplatform",children:"IapPlatform"}),"\n",(0,r.jsx)(n.p,{children:"Platform identifier for cross-platform compatibility."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"enum class IapPlatform {\n    IOS,\n    ANDROID\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"store",children:"Store"}),"\n",(0,r.jsx)(n.p,{children:"Store type identifier."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"enum class Store {\n    NONE,\n    PLAY_STORE,\n    AMAZON,\n    APP_STORE\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"producttype",children:"ProductType"}),"\n",(0,r.jsx)(n.p,{children:"Product type for queries."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"enum class ProductType {\n    INAPP,  // One-time purchases\n    SUBS    // Subscriptions\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"transactionstateios",children:"TransactionStateIOS"}),"\n",(0,r.jsx)(n.p,{children:"iOS transaction states from StoreKit."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"enum class TransactionStateIOS {\n    PURCHASING,\n    PURCHASED,\n    FAILED,\n    RESTORED,\n    DEFERRED\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"androidpurchasestate",children:"AndroidPurchaseState"}),"\n",(0,r.jsx)(n.p,{children:"Android purchase states from Google Play Billing."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"enum class AndroidPurchaseState {\n    UNSPECIFIED_STATE,  // 0 - Unspecified state\n    PURCHASED,          // 1 - Purchase completed\n    PENDING             // 2 - Purchase pending\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"subscriptionperiodunitios",children:"SubscriptionPeriodUnitIOS"}),"\n",(0,r.jsx)(n.p,{children:"iOS subscription period units from StoreKit."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"enum class SubscriptionPeriodUnitIOS {\n    DAY,\n    WEEK,\n    MONTH,\n    YEAR\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"discountpaymentmodeios",children:"DiscountPaymentModeIOS"}),"\n",(0,r.jsx)(n.p,{children:"iOS discount payment modes."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"enum class DiscountPaymentModeIOS {\n    PAYASYOUGO,\n    PAYUPFRONT,\n    FREETRIAL\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"discounttypeios",children:"DiscountTypeIOS"}),"\n",(0,r.jsx)(n.p,{children:"iOS discount types."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"enum class DiscountTypeIOS {\n    INTRODUCTORY,\n    SUBSCRIPTION\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"billing-programs-api-types-v120",children:"Billing Programs API Types (v1.2.0)"}),"\n",(0,r.jsx)(n.p,{children:"New types for Google Play Billing Programs API (Android 8.2.0+)."}),"\n",(0,r.jsx)(n.h3,{id:"billingprogram",children:"BillingProgram"}),"\n",(0,r.jsx)(n.p,{children:"Billing program types for external billing."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"enum class BillingProgram {\n    Unspecified,\n    ExternalContentLink,  // External content link programs\n    ExternalOffer         // External offer programs\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"externallinklaunchmode",children:"ExternalLinkLaunchMode"}),"\n",(0,r.jsx)(n.p,{children:"Launch mode for external links."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"enum class ExternalLinkLaunchMode {\n    Unspecified,\n    LaunchInExternalBrowserOrApp,  // Open link in browser or app\n    CallerWillLaunchLink           // Caller handles opening the link\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"externallinktype",children:"ExternalLinkType"}),"\n",(0,r.jsx)(n.p,{children:"Type of external link."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"enum class ExternalLinkType {\n    Unspecified,\n    LinkToDigitalContentOffer,  // Link to digital content offer\n    LinkToAppDownload           // Link to app download\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"launchexternallinkparams",children:"LaunchExternalLinkParams"}),"\n",(0,r.jsx)(n.p,{children:"Parameters for launching external links."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"data class LaunchExternalLinkParams(\n    val billingProgram: BillingProgram,\n    val launchMode: ExternalLinkLaunchMode,\n    val linkType: ExternalLinkType,\n    val linkUri: String\n)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"billingprogramavailabilityresult",children:"BillingProgramAvailabilityResult"}),"\n",(0,r.jsx)(n.p,{children:"Result of checking billing program availability."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"data class BillingProgramAvailabilityResult(\n    val billingProgram: BillingProgram,\n    val isAvailable: Boolean\n)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"billingprogramreportingdetails",children:"BillingProgramReportingDetails"}),"\n",(0,r.jsx)(n.p,{children:"Reporting details for external transactions."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"data class BillingProgramReportingDetails(\n    val billingProgram: BillingProgram,\n    val externalTransactionToken: String\n)\n"})}),"\n",(0,r.jsx)(n.admonition,{title:"Note",type:"info",children:(0,r.jsxs)(n.p,{children:["The Billing Programs API requires Google Play Billing Library 8.2.0+. These methods currently return ",(0,r.jsx)(n.code,{children:"FeatureNotSupported"})," error as the underlying Google Play Billing Library APIs are not yet available in the current billing-ktx dependency."]})}),"\n",(0,r.jsx)(n.h2,{id:"error-types-openiap-compliant",children:"Error Types (OpenIAP-Compliant)"}),"\n",(0,r.jsx)(n.h3,{id:"purchaseerror",children:"PurchaseError"}),"\n",(0,r.jsx)(n.p,{children:"Exception thrown for IAP errors following OpenIAP specification."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"class PurchaseError(\n    val code: String,           // ErrorCode enum value\n    override val message: String,\n    val responseCode: Int? = null,\n    val debugMessage: String? = null,\n    val purchaseToken: String? = null\n) : Exception(message)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"errorcode",children:"ErrorCode"}),"\n",(0,r.jsx)(n.p,{children:"OpenIAP-compliant error code enumeration."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"enum class ErrorCode {\n    E_UNKNOWN,\n    E_USER_CANCELLED,\n    E_USER_ERROR,\n    E_ITEM_UNAVAILABLE,\n    E_REMOTE_ERROR,\n    E_NETWORK_ERROR,\n    E_SERVICE_ERROR,\n    E_RECEIPT_FAILED,\n    E_RECEIPT_FINISHED_FAILED,\n    E_NOT_PREPARED,\n    E_NOT_ENDED,\n    E_ALREADY_OWNED,\n    E_DEVELOPER_ERROR,\n    E_BILLING_RESPONSE_JSON_PARSE_ERROR,\n    E_DEFERRED_PAYMENT,\n    E_INTERRUPTED,\n    E_IAP_NOT_AVAILABLE,\n    E_PURCHASE_ERROR,\n    E_SYNC_ERROR,\n    E_TRANSACTION_VALIDATION_FAILED,\n    E_ACTIVITY_UNAVAILABLE,\n    E_ALREADY_PREPARED,\n    E_PENDING,\n    E_CONNECTION_CLOSED,\n    E_PRODUCT_NOT_AVAILABLE\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"validation-types",children:"Validation Types"}),"\n",(0,r.jsx)(n.h3,{id:"validationoptions",children:"ValidationOptions"}),"\n",(0,r.jsx)(n.p,{children:"Union type for platform-specific validation options."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"sealed class ValidationOptions {\n    data class IOSValidation(\n        val receiptBody: IOSReceiptBody\n    ) : ValidationOptions()\n\n    data class AndroidValidation(\n        val packageName: String,\n        val productId: String,\n        val productToken: String,\n        val accessToken: String,\n        val isSub: Boolean = false\n    ) : ValidationOptions()\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"iosreceiptbody",children:"IOSReceiptBody"}),"\n",(0,r.jsx)(n.p,{children:"iOS receipt validation parameters."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"data class IOSReceiptBody(\n    val receiptData: String,\n    val password: String? = null\n)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"validationresult",children:"ValidationResult"}),"\n",(0,r.jsx)(n.p,{children:"Receipt validation result."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"data class ValidationResult(\n    val isValid: Boolean,\n    val status: Int,\n    val receipt: Map<String, Any>? = null\n)\n"})}),"\n",(0,r.jsx)(n.h2,{id:"utility-types",children:"Utility Types"}),"\n",(0,r.jsx)(n.h3,{id:"deeplinkoptions",children:"DeepLinkOptions"}),"\n",(0,r.jsx)(n.p,{children:"Options for deep linking to subscription management."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"data class DeepLinkOptions(\n    val skuAndroid: String? = null,\n    val skuIOS: String? = null\n)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"purchaseoptions",children:"PurchaseOptions"}),"\n",(0,r.jsx)(n.p,{children:"Options for querying purchases."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"data class PurchaseOptions(\n    val productType: ProductType? = null,\n    val activeOnly: Boolean = false\n)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"connectionresult",children:"ConnectionResult"}),"\n",(0,r.jsx)(n.p,{children:"Connection state result."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"data class ConnectionResult(\n    val connected: Boolean,\n    val message: String\n)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"subscription",children:"Subscription"}),"\n",(0,r.jsx)(n.p,{children:"Interface for event listeners."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"interface Subscription {\n    fun remove()\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"purchase-verification-types",children:"Purchase Verification Types"}),"\n",(0,r.jsx)(n.h3,{id:"verifypurchaseprops",children:"VerifyPurchaseProps"}),"\n",(0,r.jsx)(n.p,{children:"Platform-specific options for purchase verification."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"data class VerifyPurchaseProps(\n    val apple: VerifyPurchaseAppleOptions? = null,\n    val google: VerifyPurchaseGoogleOptions? = null,\n    val horizon: VerifyPurchaseHorizonOptions? = null\n)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"verifypurchaseappleoptions",children:"VerifyPurchaseAppleOptions"}),"\n",(0,r.jsx)(n.p,{children:"iOS-specific verification options."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"data class VerifyPurchaseAppleOptions(\n    val sku: String\n)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"verifypurchasegoogleoptions",children:"VerifyPurchaseGoogleOptions"}),"\n",(0,r.jsx)(n.p,{children:"Android-specific verification options."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"data class VerifyPurchaseGoogleOptions(\n    val sku: String,\n    val accessToken: String,      // Obtain from your backend\n    val packageName: String,\n    val purchaseToken: String,\n    val isSub: Boolean? = null\n)\n"})}),"\n",(0,r.jsx)(n.admonition,{title:"Security Note",type:"warning",children:(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"accessToken"})," must be obtained from your secure backend. Never hardcode or store Google API credentials in your app."]})}),"\n",(0,r.jsx)(n.h3,{id:"verifypurchasehorizonoptions",children:"VerifyPurchaseHorizonOptions"}),"\n",(0,r.jsx)(n.p,{children:"Meta Quest (Horizon) verification options."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"data class VerifyPurchaseHorizonOptions(\n    val sku: String,\n    val userId: String,\n    val accessToken: String       // Obtain from your backend\n)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"purchaseverificationprovider",children:"PurchaseVerificationProvider"}),"\n",(0,r.jsx)(n.p,{children:"Supported third-party verification providers."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:'enum class PurchaseVerificationProvider(val rawValue: String) {\n    Iapkit("iapkit")\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"verifypurchasewithproviderprops",children:"VerifyPurchaseWithProviderProps"}),"\n",(0,r.jsx)(n.p,{children:"Configuration for provider-based verification (e.g., IAPKit)."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"data class VerifyPurchaseWithProviderProps(\n    val provider: PurchaseVerificationProvider,\n    val iapkit: RequestVerifyPurchaseWithIapkitProps?\n)\n\ndata class RequestVerifyPurchaseWithIapkitProps(\n    val apiKey: String?,\n    val apple: RequestVerifyPurchaseWithIapkitAppleProps?,\n    val google: RequestVerifyPurchaseWithIapkitGoogleProps?\n)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"iapkitpurchasestate",children:"IapkitPurchaseState"}),"\n",(0,r.jsx)(n.p,{children:"Purchase states returned by IAPKit verification."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:'enum class IapkitPurchaseState(val rawValue: String) {\n    Unknown("unknown"),\n    Entitled("entitled"),\n    PendingAcknowledgment("pending_acknowledgment"),\n    Pending("pending"),\n    Canceled("canceled"),\n    Expired("expired"),\n    ReadyToConsume("ready_to_consume"),\n    Consumed("consumed"),\n    Inauthentic("inauthentic")\n}\n'})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"State"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Entitled"})}),(0,r.jsx)(n.td,{children:"Purchase is valid and user has access"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"PendingAcknowledgment"})}),(0,r.jsx)(n.td,{children:"Purchase needs acknowledgment (Android)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Pending"})}),(0,r.jsx)(n.td,{children:"Purchase is being processed"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Canceled"})}),(0,r.jsx)(n.td,{children:"Purchase was canceled"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Expired"})}),(0,r.jsx)(n.td,{children:"Subscription has expired"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"ReadyToConsume"})}),(0,r.jsx)(n.td,{children:"Consumable ready to be consumed"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Consumed"})}),(0,r.jsx)(n.td,{children:"Consumable has been consumed"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Inauthentic"})}),(0,r.jsx)(n.td,{children:"Purchase failed verification (potential fraud)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Unknown"})}),(0,r.jsx)(n.td,{children:"Unknown state"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"usage-examples",children:"Usage Examples"}),"\n",(0,r.jsx)(n.h3,{id:"cross-platform-product-handling",children:"Cross-Platform Product Handling"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:'// OpenIAP-compliant product handling\nfun displayProduct(product: ProductCommon) {\n    // Use standardized fields\n    println("Product: ${product.title}")\n    println("Price: ${product.displayPrice}")\n    println("Type: ${product.type}")\n\n    // Platform-specific enhancements\n    when (product.platform) {\n        "ios" -> {\n            val iosProduct = product as ProductIOS\n            if (iosProduct.isFamilyShareableIOS) {\n                println("Available for family sharing")\n            }\n        }\n        "android" -> {\n            val androidProduct = product as ProductAndroid\n            androidProduct.oneTimePurchaseOfferDetailsAndroid?.let { offer ->\n                println("Detailed pricing: ${offer.formattedPrice}")\n            }\n        }\n    }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"standardized-purchase-processing",children:"Standardized Purchase Processing"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"// OpenIAP-compliant purchase flow\nkmpIapInstance.purchaseUpdatedListener.collect { purchase ->\n    // Use unified fields\n    val receiptData = PurchaseReceiptData(\n        transactionId = purchase.id,\n        productId = purchase.productId,\n        purchaseToken = purchase.purchaseToken,\n        transactionDate = purchase.transactionDate,\n        platform = purchase.platform\n    )\n\n    // Validate with your backend\n    val isValid = validateReceiptOnServer(receiptData)\n\n    if (isValid) {\n        // Grant entitlement\n        grantEntitlement(purchase.productId)\n\n        // Finish transaction\n        kmpIapInstance.finishTransaction(\n            purchase = purchase,\n            isConsumable = determineIfConsumable(purchase.productId)\n        )\n    }\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"making-purchases-with-openiap-request-structure",children:"Making Purchases with OpenIAP Request Structure"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:'// OpenIAP-compliant purchase request\nval purchase = kmpIapInstance.requestPurchase(\n    RequestPurchaseProps(\n        ios = RequestPurchaseIosProps(\n            sku = "premium",\n            quantity = 1\n        ),\n        android = RequestPurchaseAndroidProps(\n            skus = listOf("premium")\n        )\n    )\n)\n'})}),"\n",(0,r.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Use OpenIAP interfaces"}),": Always work with ",(0,r.jsx)(n.code,{children:"ProductCommon"})," and ",(0,r.jsx)(n.code,{children:"PurchaseCommon"})," for maximum compatibility"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Platform-specific casting"}),": Cast to platform-specific types only when needed for specific features"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Unified fields first"}),": Use unified fields like ",(0,r.jsx)(n.code,{children:"purchaseToken"})," instead of platform-specific deprecated fields"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Error handling"}),": Always catch ",(0,r.jsx)(n.code,{children:"PurchaseError"})," and check OpenIAP-compliant error codes"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Backward compatibility"}),": Existing deprecated fields are still available for migration"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"migration-from-legacy-types",children:"Migration from Legacy Types"}),"\n",(0,r.jsx)(n.h3,{id:"type-aliases-for-compatibility",children:"Type Aliases for Compatibility"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"// These work automatically with existing code\nval products: List<Product> = kmpIapInstance.requestProducts(...)\nval purchase: Purchase = kmpIapInstance.requestPurchase(...)\n\n// But you can now access OpenIAP-compliant fields\nproducts.forEach { product ->\n    val displayPrice = product.displayPrice  // \u2705 New unified field\n    val productType = product.type           // \u2705 New unified field\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"deprecated-field-migration",children:"Deprecated Field Migration"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:'// \u274c OLD: Platform-specific deprecated fields\nval tokenOld = (purchase as? PurchaseAndroid)?.purchaseTokenAndroid\n    ?: (purchase as? PurchaseIOS)?.jwsRepresentationIOS\n\n// \u2705 NEW: Unified purchaseToken field\nval tokenNew = purchase.purchaseToken\n\n// \u274c OLD: UnifiedPurchaseRequest (deprecated)\nval oldRequest = UnifiedPurchaseRequest(sku = "premium")\n\n// \u2705 NEW: OpenIAP-compliant RequestPurchaseProps\nval newRequest = RequestPurchaseProps(\n    ios = RequestPurchaseIosProps(sku = "premium"),\n    android = RequestPurchaseAndroidProps(skus = listOf("premium"))\n)\n'})}),"\n",(0,r.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/kmp-iap/docs/1.2.0/api/core-methods",children:"Core Methods"})," - How to use these OpenIAP-compliant types"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/kmp-iap/docs/1.2.0/api/error-codes",children:"Error Codes"})," - Complete OpenIAP error code reference"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://openiap.dev",children:"OpenIAP Specification"})," - Official OpenIAP standard"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>o});var r=i(6540);const s={},a=r.createContext(s);function l(e){const n=r.useContext(a);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);