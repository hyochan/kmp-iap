"use strict";(self.webpackChunkkmp_iap_docs=self.webpackChunkkmp_iap_docs||[]).push([[5861],{1764:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>p,frontMatter:()=>a,metadata:()=>t,toc:()=>d});var r=i(4848),s=i(8453);const a={title:"Types",sidebar_position:2},l="Types",t={id:"api/types",title:"Types",description:"Comprehensive type definitions for kmp-iap v1.0.0-rc following OpenIAP specification. All types are fully documented with Kotlin data classes for complete type safety and cross-platform compatibility.",source:"@site/versioned_docs/version-1.0.0-beta/api/types.md",sourceDirName:"api",slug:"/api/types",permalink:"/kmp-iap/docs/1.0.0-beta/api/types",draft:!1,unlisted:!1,editUrl:"https://github.com/hyochan/kmp-iap/tree/main/docs/versioned_docs/version-1.0.0-beta/api/types.md",tags:[],version:"1.0.0-beta",sidebarPosition:2,frontMatter:{title:"Types",sidebar_position:2},sidebar:"docsSidebar",previous:{title:"API Reference",permalink:"/kmp-iap/docs/1.0.0-beta/api/"},next:{title:"Core Methods",permalink:"/kmp-iap/docs/1.0.0-beta/api/core-methods"}},o={},d=[{value:"OpenIAP Base Interfaces",id:"openiap-base-interfaces",level:2},{value:"ProductCommon (OpenIAP Base)",id:"productcommon-openiap-base",level:3},{value:"PurchaseCommon (OpenIAP Base)",id:"purchasecommon-openiap-base",level:3},{value:"Platform-Specific Implementations",id:"platform-specific-implementations",level:2},{value:"ProductIOS",id:"productios",level:3},{value:"ProductAndroid",id:"productandroid",level:3},{value:"PurchaseIOS",id:"purchaseios",level:3},{value:"PurchaseAndroid",id:"purchaseandroid",level:3},{value:"Type Aliases for Convenience",id:"type-aliases-for-convenience",level:2},{value:"Request Types (OpenIAP-Compliant)",id:"request-types-openiap-compliant",level:2},{value:"RequestPurchaseProps",id:"requestpurchaseprops",level:3},{value:"RequestPurchaseIosProps",id:"requestpurchaseiosprops",level:3},{value:"RequestPurchaseAndroidProps",id:"requestpurchaseandroidprops",level:3},{value:"RequestSubscriptionProps",id:"requestsubscriptionprops",level:3},{value:"ActiveSubscription",id:"activesubscription",level:3},{value:"ProductRequest",id:"productrequest",level:3},{value:"iOS-Specific Types",id:"ios-specific-types",level:2},{value:"SubscriptionInfoIOS",id:"subscriptioninfoios",level:3},{value:"SubscriptionOfferPeriod",id:"subscriptionofferperiod",level:3},{value:"PaymentDiscountIOS",id:"paymentdiscountios",level:3},{value:"DiscountIOS",id:"discountios",level:3},{value:"Android-Specific Types",id:"android-specific-types",level:2},{value:"ProductAndroidOneTimePurchaseOfferDetail",id:"productandroidonetimepurchaseofferdetail",level:3},{value:"ProductSubscriptionAndroidOfferDetail",id:"productsubscriptionandroidofferdetail",level:3},{value:"PricingPhaseAndroid",id:"pricingphaseandroid",level:3},{value:"SubscriptionOfferAndroid",id:"subscriptionofferandroid",level:3},{value:"RequestSubscriptionAndroidProps",id:"requestsubscriptionandroidprops",level:3},{value:"Enums",id:"enums",level:2},{value:"IapPlatform",id:"iapplatform",level:3},{value:"Store",id:"store",level:3},{value:"ProductType",id:"producttype",level:3},{value:"TransactionStateIOS",id:"transactionstateios",level:3},{value:"AndroidPurchaseState",id:"androidpurchasestate",level:3},{value:"SubscriptionPeriodUnitIOS",id:"subscriptionperiodunitios",level:3},{value:"DiscountPaymentModeIOS",id:"discountpaymentmodeios",level:3},{value:"DiscountTypeIOS",id:"discounttypeios",level:3},{value:"Error Types (OpenIAP-Compliant)",id:"error-types-openiap-compliant",level:2},{value:"PurchaseError",id:"purchaseerror",level:3},{value:"ErrorCode",id:"errorcode",level:3},{value:"Validation Types",id:"validation-types",level:2},{value:"ValidationOptions",id:"validationoptions",level:3},{value:"IOSReceiptBody",id:"iosreceiptbody",level:3},{value:"ValidationResult",id:"validationresult",level:3},{value:"Utility Types",id:"utility-types",level:2},{value:"DeepLinkOptions",id:"deeplinkoptions",level:3},{value:"PurchaseOptions",id:"purchaseoptions",level:3},{value:"ConnectionResult",id:"connectionresult",level:3},{value:"Subscription",id:"subscription",level:3},{value:"Usage Examples",id:"usage-examples",level:2},{value:"Cross-Platform Product Handling",id:"cross-platform-product-handling",level:3},{value:"Standardized Purchase Processing",id:"standardized-purchase-processing",level:3},{value:"Making Purchases with OpenIAP Request Structure",id:"making-purchases-with-openiap-request-structure",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Migration from Legacy Types",id:"migration-from-legacy-types",level:2},{value:"Type Aliases for Compatibility",id:"type-aliases-for-compatibility",level:3},{value:"Deprecated Field Migration",id:"deprecated-field-migration",level:3},{value:"See Also",id:"see-also",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"types",children:"Types"}),"\n",(0,r.jsxs)(n.p,{children:["Comprehensive type definitions for kmp-iap v1.0.0-rc following ",(0,r.jsx)(n.a,{href:"https://openiap.dev",children:"OpenIAP specification"}),". All types are fully documented with Kotlin data classes for complete type safety and cross-platform compatibility."]}),"\n",(0,r.jsx)(n.h2,{id:"openiap-base-interfaces",children:"OpenIAP Base Interfaces"}),"\n",(0,r.jsx)(n.h3,{id:"productcommon-openiap-base",children:"ProductCommon (OpenIAP Base)"}),"\n",(0,r.jsx)(n.p,{children:"Base interface following OpenIAP specification for all product types."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:'interface ProductCommon {\n    val id: String              // Unified product identifier\n    val title: String           // Product title\n    val description: String     // Product description\n    val type: ProductType       // "inapp" or "subs"\n    val displayName: String?    // Optional display name\n    val displayPrice: String    // Formatted price for display\n    val currency: String        // ISO currency code\n    val price: Double?          // Numeric price value\n    val debugDescription: String?\n    val platform: String?      // Platform identifier\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"purchasecommon-openiap-base",children:"PurchaseCommon (OpenIAP Base)"}),"\n",(0,r.jsx)(n.p,{children:"Base interface following OpenIAP specification for all purchase types."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"interface PurchaseCommon {\n    val id: String              // Transaction identifier\n    val productId: String       // Product that was purchased\n    val ids: List<String>?      // Multiple product IDs (Android)\n    val transactionId: String?  // @deprecated - use id instead\n    val transactionDate: Double // Unix timestamp\n    val transactionReceipt: String\n    val purchaseToken: String?  // Unified token field\n    val platform: String?\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"platform-specific-implementations",children:"Platform-Specific Implementations"}),"\n",(0,r.jsx)(n.h3,{id:"productios",children:"ProductIOS"}),"\n",(0,r.jsx)(n.p,{children:"iOS product implementation with platform-specific fields."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:'data class ProductIOS(\n    // ProductCommon fields\n    override val id: String,\n    override val title: String,\n    override val description: String,\n    override val type: ProductType,\n    override val displayPrice: String,\n    override val currency: String,\n    override val price: Double?,\n    override val debugDescription: String?,\n    override val displayName: String?,\n    override val platform: String = "ios",\n\n    // iOS-specific fields\n    val displayNameIOS: String,\n    val isFamilyShareableIOS: Boolean,\n    val jsonRepresentationIOS: String,\n    val subscriptionInfoIOS: SubscriptionInfoIOS? = null\n) : ProductCommon\n'})}),"\n",(0,r.jsx)(n.h3,{id:"productandroid",children:"ProductAndroid"}),"\n",(0,r.jsx)(n.p,{children:"Android product implementation with Google Play Billing fields."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:'data class ProductAndroid(\n    // ProductCommon fields\n    override val id: String,\n    override val title: String,\n    override val description: String,\n    override val type: ProductType,\n    override val displayPrice: String,\n    override val currency: String,\n    override val price: Double?,\n    override val debugDescription: String?,\n    override val displayName: String?,\n    override val platform: String = "android",\n\n    // Android-specific fields\n    val nameAndroid: String,\n    val oneTimePurchaseOfferDetailsAndroid: ProductAndroidOneTimePurchaseOfferDetail? = null,\n    val subscriptionOfferDetailsAndroid: List<ProductSubscriptionAndroidOfferDetail>? = null\n) : ProductCommon\n'})}),"\n",(0,r.jsx)(n.h3,{id:"purchaseios",children:"PurchaseIOS"}),"\n",(0,r.jsx)(n.p,{children:"iOS purchase implementation with StoreKit fields."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:'data class PurchaseIOS(\n    // PurchaseCommon fields\n    override val id: String,\n    override val productId: String,\n    override val ids: List<String>? = null,\n    override val transactionId: String? = null,  // @deprecated\n    override val transactionDate: Double,\n    override val transactionReceipt: String,\n    override val purchaseToken: String? = null,\n    override val platform: String = "ios",\n\n    // iOS-specific fields\n    val jwsRepresentationIOS: String? = null,\n    val originalTransactionDateIOS: Double? = null,\n    val originalTransactionIdentifierIOS: String? = null,\n    val transactionState: TransactionStateIOS? = null\n) : PurchaseCommon\n'})}),"\n",(0,r.jsx)(n.h3,{id:"purchaseandroid",children:"PurchaseAndroid"}),"\n",(0,r.jsx)(n.p,{children:"Android purchase implementation with Google Play Billing fields."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:'data class PurchaseAndroid(\n    // PurchaseCommon fields\n    override val id: String,\n    override val productId: String,\n    override val ids: List<String>? = null,\n    override val transactionId: String? = null,  // @deprecated\n    override val transactionDate: Double,\n    override val transactionReceipt: String,\n    override val purchaseToken: String? = null,\n    override val platform: String = "android",\n\n    // Android-specific fields\n    val purchaseStateAndroid: AndroidPurchaseState? = null,\n    val acknowledgedAndroid: Boolean? = null,\n    val autoRenewingAndroid: Boolean? = null,\n    val obfuscatedAccountIdAndroid: String? = null,\n    val obfuscatedProfileIdAndroid: String? = null,\n    val orderIdAndroid: String? = null,\n    val packageNameAndroid: String? = null,\n    val purchaseTimeAndroid: Double? = null,\n    val purchaseTokenAndroid: String? = null,  // @deprecated\n    val signatureAndroid: String? = null\n) : PurchaseCommon\n'})}),"\n",(0,r.jsx)(n.h2,{id:"type-aliases-for-convenience",children:"Type Aliases for Convenience"}),"\n",(0,r.jsx)(n.p,{children:"OpenIAP-compliant type aliases for backward compatibility and ease of use."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"// Union types\ntypealias Product = ProductCommon\ntypealias Purchase = PurchaseCommon\ntypealias SubscriptionProduct = ProductCommon\ntypealias ProductPurchase = PurchaseCommon\ntypealias SubscriptionPurchase = PurchaseCommon\n"})}),"\n",(0,r.jsx)(n.h2,{id:"request-types-openiap-compliant",children:"Request Types (OpenIAP-Compliant)"}),"\n",(0,r.jsx)(n.h3,{id:"requestpurchaseprops",children:"RequestPurchaseProps"}),"\n",(0,r.jsx)(n.p,{children:"OpenIAP-compliant purchase request structure with platform-specific options."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"data class RequestPurchaseProps(\n    val ios: RequestPurchaseIosProps? = null,\n    val android: RequestPurchaseAndroidProps? = null\n)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"requestpurchaseiosprops",children:"RequestPurchaseIosProps"}),"\n",(0,r.jsx)(n.p,{children:"iOS-specific purchase request parameters."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"data class RequestPurchaseIosProps(\n    val sku: String,\n    val andDangerouslyFinishTransactionAutomatically: Boolean? = null,\n    val appAccountToken: String? = null,\n    val quantity: Int? = null,\n    val withOffer: PaymentDiscountIOS? = null\n)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"requestpurchaseandroidprops",children:"RequestPurchaseAndroidProps"}),"\n",(0,r.jsx)(n.p,{children:"Android-specific purchase request parameters."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"data class RequestPurchaseAndroidProps(\n    val skus: List<String>,\n    val obfuscatedAccountIdAndroid: String? = null,\n    val obfuscatedProfileIdAndroid: String? = null,\n    val isOfferPersonalized: Boolean? = null\n)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"requestsubscriptionprops",children:"RequestSubscriptionProps"}),"\n",(0,r.jsx)(n.p,{children:"OpenIAP-compliant subscription request structure."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"data class RequestSubscriptionProps(\n    val ios: RequestPurchaseIosProps? = null,\n    val android: RequestSubscriptionAndroidProps? = null\n)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"activesubscription",children:"ActiveSubscription"}),"\n",(0,r.jsx)(n.p,{children:"Represents an active subscription with platform-specific details following OpenIAP specification."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:'data class ActiveSubscription(\n    val productId: String,                    // Product identifier\n    val isActive: Boolean,                    // Always true for active subscriptions\n\n    // iOS-specific fields\n    val expirationDateIOS: Long? = null,      // Expiration timestamp (iOS only)\n    val environmentIOS: String? = null,       // "Sandbox" | "Production" (iOS only)\n    val daysUntilExpirationIOS: Int? = null,  // Days remaining until expiration (iOS only)\n\n    // Android-specific fields\n    val autoRenewingAndroid: Boolean? = null, // Auto-renewal status (Android only)\n\n    // Cross-platform fields\n    val willExpireSoon: Boolean? = null       // True if expiring within 7 days\n)\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Platform-Specific Behavior"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"iOS"}),": Provides exact expiration dates, environment info, and calculated days until expiration"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Android"}),": Provides auto-renewal status. When ",(0,r.jsx)(n.code,{children:"false"}),", the subscription will not renew"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Cross-platform"}),": ",(0,r.jsx)(n.code,{children:"willExpireSoon"})," warns if subscription expires within 7 days"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Use Cases"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Feature gating based on subscription status"}),"\n",(0,r.jsx)(n.li,{children:"Showing expiration warnings"}),"\n",(0,r.jsx)(n.li,{children:"Managing subscription renewals"}),"\n",(0,r.jsx)(n.li,{children:"Environment-specific testing (iOS Sandbox vs Production)"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"productrequest",children:"ProductRequest"}),"\n",(0,r.jsx)(n.p,{children:"Request parameters for loading products."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"data class ProductRequest(\n    val skus: List<String>,\n    val type: ProductType\n)\n"})}),"\n",(0,r.jsx)(n.h2,{id:"ios-specific-types",children:"iOS-Specific Types"}),"\n",(0,r.jsx)(n.h3,{id:"subscriptioninfoios",children:"SubscriptionInfoIOS"}),"\n",(0,r.jsx)(n.p,{children:"iOS subscription information from StoreKit."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"data class SubscriptionInfoIOS(\n    val subscriptionGroupId: String,\n    val subscriptionPeriod: SubscriptionOfferPeriod\n)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"subscriptionofferperiod",children:"SubscriptionOfferPeriod"}),"\n",(0,r.jsx)(n.p,{children:"iOS subscription period definition."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:'data class SubscriptionOfferPeriod(\n    val unit: String,        // "DAY", "WEEK", "MONTH", "YEAR"\n    val value: Int           // Number of units\n)\n'})}),"\n",(0,r.jsx)(n.h3,{id:"paymentdiscountios",children:"PaymentDiscountIOS"}),"\n",(0,r.jsx)(n.p,{children:"iOS promotional offer payment discount."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"data class PaymentDiscountIOS(\n    val identifier: String,\n    val keyIdentifier: String,\n    val nonce: String,\n    val signature: String,\n    val timestamp: Double\n)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"discountios",children:"DiscountIOS"}),"\n",(0,r.jsx)(n.p,{children:"iOS product discount information."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"data class DiscountIOS(\n    val identifier: String,\n    val type: String,\n    val numberOfPeriods: String,\n    val price: String,\n    val localizedPrice: String,\n    val paymentMode: String,\n    val subscriptionPeriod: String\n)\n"})}),"\n",(0,r.jsx)(n.h2,{id:"android-specific-types",children:"Android-Specific Types"}),"\n",(0,r.jsx)(n.h3,{id:"productandroidonetimepurchaseofferdetail",children:"ProductAndroidOneTimePurchaseOfferDetail"}),"\n",(0,r.jsx)(n.p,{children:"Android one-time purchase offer details from Google Play Billing."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"data class ProductAndroidOneTimePurchaseOfferDetail(\n    val formattedPrice: String,\n    val priceAmountMicros: String,\n    val priceCurrencyCode: String\n)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"productsubscriptionandroidofferdetail",children:"ProductSubscriptionAndroidOfferDetail"}),"\n",(0,r.jsx)(n.p,{children:"Android subscription offer details."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"data class ProductSubscriptionAndroidOfferDetail(\n    val basePlanId: String,\n    val offerId: String?,\n    val offerToken: String,\n    val pricingPhases: List<PricingPhaseAndroid>,\n    val offerTags: List<String>\n)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"pricingphaseandroid",children:"PricingPhaseAndroid"}),"\n",(0,r.jsx)(n.p,{children:"Android subscription pricing phase."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"data class PricingPhaseAndroid(\n    val formattedPrice: String,\n    val priceCurrencyCode: String,\n    val billingPeriod: String,\n    val billingCycleCount: Int,\n    val priceAmountMicros: String,\n    val recurrenceMode: Int\n)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"subscriptionofferandroid",children:"SubscriptionOfferAndroid"}),"\n",(0,r.jsx)(n.p,{children:"Android subscription offer for purchase requests."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"data class SubscriptionOfferAndroid(\n    val basePlanId: String,\n    val offerId: String?,\n    val offerToken: String\n)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"requestsubscriptionandroidprops",children:"RequestSubscriptionAndroidProps"}),"\n",(0,r.jsx)(n.p,{children:"Android-specific subscription request parameters."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"data class RequestSubscriptionAndroidProps(\n    val skus: List<String>,\n    val obfuscatedAccountIdAndroid: String? = null,\n    val obfuscatedProfileIdAndroid: String? = null,\n    val isOfferPersonalized: Boolean? = null,\n    val purchaseTokenAndroid: String? = null,\n    val replacementModeAndroid: Int? = null,\n    val subscriptionOffers: List<SubscriptionOfferAndroid>\n)\n"})}),"\n",(0,r.jsx)(n.h2,{id:"enums",children:"Enums"}),"\n",(0,r.jsx)(n.h3,{id:"iapplatform",children:"IapPlatform"}),"\n",(0,r.jsx)(n.p,{children:"Platform identifier for cross-platform compatibility."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"enum class IapPlatform {\n    IOS,\n    ANDROID\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"store",children:"Store"}),"\n",(0,r.jsx)(n.p,{children:"Store type identifier."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"enum class Store {\n    NONE,\n    PLAY_STORE,\n    AMAZON,\n    APP_STORE\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"producttype",children:"ProductType"}),"\n",(0,r.jsx)(n.p,{children:"Product type for queries."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"enum class ProductType {\n    INAPP,  // One-time purchases\n    SUBS    // Subscriptions\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"transactionstateios",children:"TransactionStateIOS"}),"\n",(0,r.jsx)(n.p,{children:"iOS transaction states from StoreKit."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"enum class TransactionStateIOS {\n    PURCHASING,\n    PURCHASED,\n    FAILED,\n    RESTORED,\n    DEFERRED\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"androidpurchasestate",children:"AndroidPurchaseState"}),"\n",(0,r.jsx)(n.p,{children:"Android purchase states from Google Play Billing."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"enum class AndroidPurchaseState {\n    UNSPECIFIED_STATE,  // 0 - Unspecified state\n    PURCHASED,          // 1 - Purchase completed\n    PENDING             // 2 - Purchase pending\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"subscriptionperiodunitios",children:"SubscriptionPeriodUnitIOS"}),"\n",(0,r.jsx)(n.p,{children:"iOS subscription period units from StoreKit."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"enum class SubscriptionPeriodUnitIOS {\n    DAY,\n    WEEK,\n    MONTH,\n    YEAR\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"discountpaymentmodeios",children:"DiscountPaymentModeIOS"}),"\n",(0,r.jsx)(n.p,{children:"iOS discount payment modes."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"enum class DiscountPaymentModeIOS {\n    PAYASYOUGO,\n    PAYUPFRONT,\n    FREETRIAL\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"discounttypeios",children:"DiscountTypeIOS"}),"\n",(0,r.jsx)(n.p,{children:"iOS discount types."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"enum class DiscountTypeIOS {\n    INTRODUCTORY,\n    SUBSCRIPTION\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"error-types-openiap-compliant",children:"Error Types (OpenIAP-Compliant)"}),"\n",(0,r.jsx)(n.h3,{id:"purchaseerror",children:"PurchaseError"}),"\n",(0,r.jsx)(n.p,{children:"Exception thrown for IAP errors following OpenIAP specification."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"class PurchaseError(\n    val code: String,           // ErrorCode enum value\n    override val message: String,\n    val responseCode: Int? = null,\n    val debugMessage: String? = null,\n    val purchaseToken: String? = null\n) : Exception(message)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"errorcode",children:"ErrorCode"}),"\n",(0,r.jsx)(n.p,{children:"OpenIAP-compliant error code enumeration."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"enum class ErrorCode {\n    E_UNKNOWN,\n    E_USER_CANCELLED,\n    E_USER_ERROR,\n    E_ITEM_UNAVAILABLE,\n    E_REMOTE_ERROR,\n    E_NETWORK_ERROR,\n    E_SERVICE_ERROR,\n    E_RECEIPT_FAILED,\n    E_RECEIPT_FINISHED_FAILED,\n    E_NOT_PREPARED,\n    E_NOT_ENDED,\n    E_ALREADY_OWNED,\n    E_DEVELOPER_ERROR,\n    E_BILLING_RESPONSE_JSON_PARSE_ERROR,\n    E_DEFERRED_PAYMENT,\n    E_INTERRUPTED,\n    E_IAP_NOT_AVAILABLE,\n    E_PURCHASE_ERROR,\n    E_SYNC_ERROR,\n    E_TRANSACTION_VALIDATION_FAILED,\n    E_ACTIVITY_UNAVAILABLE,\n    E_ALREADY_PREPARED,\n    E_PENDING,\n    E_CONNECTION_CLOSED,\n    E_PRODUCT_NOT_AVAILABLE\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"validation-types",children:"Validation Types"}),"\n",(0,r.jsx)(n.h3,{id:"validationoptions",children:"ValidationOptions"}),"\n",(0,r.jsx)(n.p,{children:"Union type for platform-specific validation options."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"sealed class ValidationOptions {\n    data class IOSValidation(\n        val receiptBody: IOSReceiptBody\n    ) : ValidationOptions()\n\n    data class AndroidValidation(\n        val packageName: String,\n        val productId: String,\n        val productToken: String,\n        val accessToken: String,\n        val isSub: Boolean = false\n    ) : ValidationOptions()\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"iosreceiptbody",children:"IOSReceiptBody"}),"\n",(0,r.jsx)(n.p,{children:"iOS receipt validation parameters."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"data class IOSReceiptBody(\n    val receiptData: String,\n    val password: String? = null\n)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"validationresult",children:"ValidationResult"}),"\n",(0,r.jsx)(n.p,{children:"Receipt validation result."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"data class ValidationResult(\n    val isValid: Boolean,\n    val status: Int,\n    val receipt: Map<String, Any>? = null\n)\n"})}),"\n",(0,r.jsx)(n.h2,{id:"utility-types",children:"Utility Types"}),"\n",(0,r.jsx)(n.h3,{id:"deeplinkoptions",children:"DeepLinkOptions"}),"\n",(0,r.jsx)(n.p,{children:"Options for deep linking to subscription management."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"data class DeepLinkOptions(\n    val skuAndroid: String? = null,\n    val skuIOS: String? = null\n)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"purchaseoptions",children:"PurchaseOptions"}),"\n",(0,r.jsx)(n.p,{children:"Options for querying purchases."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"data class PurchaseOptions(\n    val productType: ProductType? = null,\n    val activeOnly: Boolean = false\n)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"connectionresult",children:"ConnectionResult"}),"\n",(0,r.jsx)(n.p,{children:"Connection state result."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"data class ConnectionResult(\n    val connected: Boolean,\n    val message: String\n)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"subscription",children:"Subscription"}),"\n",(0,r.jsx)(n.p,{children:"Interface for event listeners."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"interface Subscription {\n    fun remove()\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"usage-examples",children:"Usage Examples"}),"\n",(0,r.jsx)(n.h3,{id:"cross-platform-product-handling",children:"Cross-Platform Product Handling"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:'// OpenIAP-compliant product handling\nfun displayProduct(product: ProductCommon) {\n    // Use standardized fields\n    println("Product: ${product.title}")\n    println("Price: ${product.displayPrice}")\n    println("Type: ${product.type}")\n\n    // Platform-specific enhancements\n    when (product.platform) {\n        "ios" -> {\n            val iosProduct = product as ProductIOS\n            if (iosProduct.isFamilyShareableIOS) {\n                println("Available for family sharing")\n            }\n        }\n        "android" -> {\n            val androidProduct = product as ProductAndroid\n            androidProduct.oneTimePurchaseOfferDetailsAndroid?.let { offer ->\n                println("Detailed pricing: ${offer.formattedPrice}")\n            }\n        }\n    }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"standardized-purchase-processing",children:"Standardized Purchase Processing"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"// OpenIAP-compliant purchase flow\nkmpIapInstance.purchaseUpdatedListener.collect { purchase ->\n    // Use unified fields\n    val receiptData = PurchaseReceiptData(\n        transactionId = purchase.id,\n        productId = purchase.productId,\n        purchaseToken = purchase.purchaseToken,\n        transactionDate = purchase.transactionDate,\n        platform = purchase.platform\n    )\n\n    // Validate with your backend\n    val isValid = validateReceiptOnServer(receiptData)\n\n    if (isValid) {\n        // Grant entitlement\n        grantEntitlement(purchase.productId)\n\n        // Finish transaction\n        kmpIapInstance.finishTransaction(\n            purchase = purchase,\n            isConsumable = determineIfConsumable(purchase.productId)\n        )\n    }\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"making-purchases-with-openiap-request-structure",children:"Making Purchases with OpenIAP Request Structure"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:'// OpenIAP-compliant purchase request\nval purchase = kmpIapInstance.requestPurchase(\n    RequestPurchaseProps(\n        ios = RequestPurchaseIosProps(\n            sku = "premium",\n            quantity = 1\n        ),\n        android = RequestPurchaseAndroidProps(\n            skus = listOf("premium")\n        )\n    )\n)\n'})}),"\n",(0,r.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Use OpenIAP interfaces"}),": Always work with ",(0,r.jsx)(n.code,{children:"ProductCommon"})," and ",(0,r.jsx)(n.code,{children:"PurchaseCommon"})," for maximum compatibility"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Platform-specific casting"}),": Cast to platform-specific types only when needed for specific features"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Unified fields first"}),": Use unified fields like ",(0,r.jsx)(n.code,{children:"purchaseToken"})," instead of platform-specific deprecated fields"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Error handling"}),": Always catch ",(0,r.jsx)(n.code,{children:"PurchaseError"})," and check OpenIAP-compliant error codes"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Backward compatibility"}),": Existing deprecated fields are still available for migration"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"migration-from-legacy-types",children:"Migration from Legacy Types"}),"\n",(0,r.jsx)(n.h3,{id:"type-aliases-for-compatibility",children:"Type Aliases for Compatibility"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"// These work automatically with existing code\nval products: List<Product> = kmpIapInstance.requestProducts(...)\nval purchase: Purchase = kmpIapInstance.requestPurchase(...)\n\n// But you can now access OpenIAP-compliant fields\nproducts.forEach { product ->\n    val displayPrice = product.displayPrice  // \u2705 New unified field\n    val productType = product.type           // \u2705 New unified field\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"deprecated-field-migration",children:"Deprecated Field Migration"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:'// \u274c OLD: Platform-specific deprecated fields\nval tokenOld = (purchase as? PurchaseAndroid)?.purchaseTokenAndroid\n    ?: (purchase as? PurchaseIOS)?.jwsRepresentationIOS\n\n// \u2705 NEW: Unified purchaseToken field\nval tokenNew = purchase.purchaseToken\n\n// \u274c OLD: UnifiedPurchaseRequest (deprecated)\nval oldRequest = UnifiedPurchaseRequest(sku = "premium")\n\n// \u2705 NEW: OpenIAP-compliant RequestPurchaseProps\nval newRequest = RequestPurchaseProps(\n    ios = RequestPurchaseIosProps(sku = "premium"),\n    android = RequestPurchaseAndroidProps(skus = listOf("premium"))\n)\n'})}),"\n",(0,r.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/kmp-iap/docs/1.0.0-beta/api/core-methods",children:"Core Methods"})," - How to use these OpenIAP-compliant types"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/kmp-iap/docs/1.0.0-beta/api/error-codes",children:"Error Codes"})," - Complete OpenIAP error code reference"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://openiap.dev",children:"OpenIAP Specification"})," - Official OpenIAP standard"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>t});var r=i(6540);const s={},a=r.createContext(s);function l(e){const n=r.useContext(a);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);