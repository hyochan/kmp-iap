"use strict";(self.webpackChunkkmp_iap_docs=self.webpackChunkkmp_iap_docs||[]).push([[291],{4204:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>d,frontMatter:()=>r,metadata:()=>o,toc:()=>c});var t=s(4848),i=s(8453);const r={slug:"release-1.3.6",title:"1.3.6 - ExternalPurchaseCustomLink API Types (iOS 18.1+)",authors:["hyochan"],tags:["release","openiap","kmp","ios"],description:"KMP-IAP 1.3.6 syncs with OpenIAP gql v1.3.16 - adding ExternalPurchaseCustomLink API types for iOS 18.1+, corrected iOS version for ExternalPurchase APIs (17.4+).",date:new Date("2026-01-26T00:00:00.000Z")},l="KMP-IAP 1.3.6",o={permalink:"/kmp-iap/blog/release-1.3.6",editUrl:"https://github.com/hyochan/kmp-iap/tree/main/docs/blog/2026-01-26-release-1.3.6.md",source:"@site/blog/2026-01-26-release-1.3.6.md",title:"1.3.6 - ExternalPurchaseCustomLink API Types (iOS 18.1+)",description:"KMP-IAP 1.3.6 syncs with OpenIAP gql v1.3.16 - adding ExternalPurchaseCustomLink API types for iOS 18.1+, corrected iOS version for ExternalPurchase APIs (17.4+).",date:"2026-01-26T00:00:00.000Z",formattedDate:"January 26, 2026",tags:[{label:"release",permalink:"/kmp-iap/blog/tags/release"},{label:"openiap",permalink:"/kmp-iap/blog/tags/openiap"},{label:"kmp",permalink:"/kmp-iap/blog/tags/kmp"},{label:"ios",permalink:"/kmp-iap/blog/tags/ios"}],readingTime:1.73,hasTruncateMarker:!0,authors:[{name:"Hyo",title:"Maintainer of kmp-iap",url:"https://github.com/hyochan",imageURL:"https://github.com/hyochan.png",key:"hyochan"}],frontMatter:{slug:"release-1.3.6",title:"1.3.6 - ExternalPurchaseCustomLink API Types (iOS 18.1+)",authors:["hyochan"],tags:["release","openiap","kmp","ios"],description:"KMP-IAP 1.3.6 syncs with OpenIAP gql v1.3.16 - adding ExternalPurchaseCustomLink API types for iOS 18.1+, corrected iOS version for ExternalPurchase APIs (17.4+).",date:"2026-01-26T00:00:00.000Z"},unlisted:!1,prevItem:{title:"1.3.7 - OpenIAP 1.3.17 Sync",permalink:"/kmp-iap/blog/1.3.7"},nextItem:{title:"1.3.4 - One-Time Purchase Discounts & Simplified Field Names",permalink:"/kmp-iap/blog/release-1.3.4"}},a={authorsImageUrls:[void 0]},c=[{value:"New Types",id:"new-types",level:2},{value:"ExternalPurchaseCustomLink API (iOS 18.1+)",id:"externalpurchasecustomlink-api-ios-181",level:3},{value:"New API Methods (iOS 18.1+)",id:"new-api-methods-ios-181",level:3},{value:"Documentation Fixes",id:"documentation-fixes",level:2},{value:"iOS ExternalPurchase API Version Correction",id:"ios-externalpurchase-api-version-correction",level:3},{value:"New Types Summary",id:"new-types-summary",level:2},{value:"OpenIAP Versions",id:"openiap-versions",level:2},{value:"Installation",id:"installation",level:2},{value:"References",id:"references",level:2}];function h(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["This release syncs with ",(0,t.jsx)(n.a,{href:"https://www.openiap.dev/docs/updates/notes#gql-1-3-16-google-1-3-27-apple-1-3-14",children:"OpenIAP gql v1.3.16 / google v1.3.27 / apple v1.3.14"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"new-types",children:"New Types"}),"\n",(0,t.jsx)(n.h3,{id:"externalpurchasecustomlink-api-ios-181",children:"ExternalPurchaseCustomLink API (iOS 18.1+)"}),"\n",(0,t.jsx)(n.p,{children:"New types for the ExternalPurchaseCustomLink API that allows apps to link users to external purchase flows with proper disclosure:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-kotlin",children:'// Notice type for external purchase custom link\nval noticeType = ExternalPurchaseCustomLinkNoticeTypeIOS.Browser\n\n// Token types for external purchase reporting\nval acquisitionType = ExternalPurchaseCustomLinkTokenTypeIOS.Acquisition\nval servicesType = ExternalPurchaseCustomLinkTokenTypeIOS.Services\n\n// Result types\nval noticeResult = ExternalPurchaseCustomLinkNoticeResultIOS(\n    continued = true,\n    error = null\n)\n\nval tokenResult = ExternalPurchaseCustomLinkTokenResultIOS(\n    token = "external_purchase_token",\n    error = null\n)\n'})}),"\n",(0,t.jsx)(n.h3,{id:"new-api-methods-ios-181",children:"New API Methods (iOS 18.1+)"}),"\n",(0,t.jsx)(n.p,{children:"The following API methods are now available for iOS 18.1+:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-kotlin",children:"// Check eligibility\nval isEligible = kmpIapInstance.isEligibleForExternalPurchaseCustomLinkIOS()\n\n// Show notice and get user consent\nval noticeResult = kmpIapInstance.showExternalPurchaseCustomLinkNoticeIOS(\n    ExternalPurchaseCustomLinkNoticeTypeIOS.Browser\n)\nif (noticeResult.continued) {\n    // User agreed to continue to external purchase\n}\n\n// Get token for reporting to Apple\nval tokenResult = kmpIapInstance.getExternalPurchaseCustomLinkTokenIOS(\n    ExternalPurchaseCustomLinkTokenTypeIOS.Acquisition\n)\nif (tokenResult.token != null) {\n    // Report to Apple's External Purchase Server API\n}\n"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note:"})," These APIs require iOS 18.1 or later. Apps targeting earlier iOS versions should check ",(0,t.jsx)(n.code,{children:"isEligibleForExternalPurchaseCustomLinkIOS()"})," before using these features."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"documentation-fixes",children:"Documentation Fixes"}),"\n",(0,t.jsx)(n.h3,{id:"ios-externalpurchase-api-version-correction",children:"iOS ExternalPurchase API Version Correction"}),"\n",(0,t.jsxs)(n.p,{children:["Fixed the documented iOS version requirement for ExternalPurchase APIs from iOS 15.4+ to ",(0,t.jsx)(n.strong,{children:"iOS 17.4+"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"canPresentExternalPurchaseNoticeIOS()"})," - iOS 17.4+"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"presentExternalPurchaseNoticeSheetIOS()"})," - iOS 17.4+"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"presentExternalPurchaseLinkIOS()"})," - iOS 17.4+"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"new-types-summary",children:"New Types Summary"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Platform"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"ExternalPurchaseCustomLinkNoticeTypeIOS"})}),(0,t.jsx)(n.td,{children:"iOS 18.1+"}),(0,t.jsx)(n.td,{children:"Notice type enum (Browser)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"ExternalPurchaseCustomLinkTokenTypeIOS"})}),(0,t.jsx)(n.td,{children:"iOS 18.1+"}),(0,t.jsx)(n.td,{children:"Token type enum (Acquisition, Services)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"ExternalPurchaseCustomLinkNoticeResultIOS"})}),(0,t.jsx)(n.td,{children:"iOS 18.1+"}),(0,t.jsx)(n.td,{children:"Result of showing notice sheet"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"ExternalPurchaseCustomLinkTokenResultIOS"})}),(0,t.jsx)(n.td,{children:"iOS 18.1+"}),(0,t.jsx)(n.td,{children:"Result of token request"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"openiap-versions",children:"OpenIAP Versions"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Package"}),(0,t.jsx)(n.th,{children:"Version"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"openiap-gql"}),(0,t.jsx)(n.td,{children:"1.3.16"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"openiap-google"}),(0,t.jsx)(n.td,{children:"1.3.27"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"openiap-apple"}),(0,t.jsx)(n.td,{children:"1.3.14"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-kotlin",children:'implementation("io.github.hyochan:kmp-iap:1.3.6")\n'})}),"\n",(0,t.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://www.openiap.dev/docs/updates/notes#gql-1-3-16-google-1-3-27-apple-1-3-14",children:"OpenIAP gql v1.3.16 / google v1.3.27 / apple v1.3.14 Release Notes"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://developer.apple.com/documentation/storekit/externalpurchasecustomlink",children:"Apple ExternalPurchaseCustomLink Documentation"})}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/blog/release-1.3.2",children:"1.3.2 Release Notes"})," - Previous release"]}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>o});var t=s(6540);const i={},r=t.createContext(i);function l(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);