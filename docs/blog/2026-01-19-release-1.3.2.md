---
slug: release-1.3.2
title: 1.3.2 - Win-Back Offers, JWS Promotional Offers & Product Status
authors: [hyochan]
tags: [release, openiap, kmp, ios, android]
description: KMP-IAP 1.3.2 syncs with OpenIAP gql v1.3.14 - adding iOS win-back offers, JWS promotional offers, introductory offer eligibility override, and Android product status codes.
date: 2026-01-19
---

# KMP-IAP 1.3.2

This release syncs with [OpenIAP gql v1.3.14 / google v1.3.25 / apple v1.3.12](https://www.openiap.dev/docs/updates/notes#gql-1-3-14-google-1-3-25-apple-1-3-12).

<!-- truncate -->

## New Features

### iOS Win-Back Offers (iOS 18+)

Win-back offers help re-engage churned subscribers with discounts or free trials.

```kotlin
kmpIapInstance.requestPurchase {
    type = ProductType.Subs
    ios {
        sku = "premium_monthly"
        winBackOffer = WinBackOfferInputIOS(
            offerId = "winback_50_off"
        )
    }
}
```

### iOS JWS Promotional Offers (iOS 15+)

New signature format using compact JWS string for promotional offers. Back-deployed to iOS 15.

```kotlin
kmpIapInstance.requestPurchase {
    type = ProductType.Subs
    ios {
        sku = "premium_monthly"
        promotionalOfferJWS = PromotionalOfferJWSInputIOS(
            offerId = "promo_summer_2026",
            jws = "eyJhbGciOiJFUzI1NiIs..." // Server-signed JWS
        )
    }
}
```

### iOS Introductory Offer Eligibility Override (iOS 15+)

Override system eligibility check for introductory offers.

```kotlin
kmpIapInstance.requestPurchase {
    type = ProductType.Subs
    ios {
        sku = "premium_monthly"
        introductoryOfferEligibility = true // Override system eligibility
    }
}
```

> **Note:** Requires Xcode 16.4+ to compile. System determines eligibility automatically on older Xcode versions.

### Android Product Status Codes (Billing 8.0+)

Products now include status codes explaining fetch results:

```kotlin
val products = kmpIapInstance.fetchProducts {
    skus = listOf("premium_monthly")
    type = ProductQueryType.Subs
}

products.forEach { product ->
    when ((product as? ProductAndroid)?.productStatusAndroid) {
        ProductStatusAndroid.Ok -> println("Product fetched successfully")
        ProductStatusAndroid.NotFound -> println("SKU doesn't exist")
        ProductStatusAndroid.NoOffersAvailable -> println("User not eligible")
        ProductStatusAndroid.Unknown -> println("Unknown status")
        null -> {} // iOS or no status
    }
}
```

## Breaking Changes

### iOS Subscription-Only Props Cleanup

Removed subscription-specific fields from `RequestPurchaseIosProps`. These fields now only exist in `RequestSubscriptionIosProps`:

- `introductoryOfferEligibility`
- `promotionalOfferJWS`
- `winBackOffer`

**Migration:** If using these fields for purchases, switch to `requestSubscription()` API.

## Bug Fixes

### Android displayPrice Fix for Free Trials

Fixed an issue where `displayPrice` returned "Free" or "$0.00" for subscription products with free trials. Now returns the actual base/recurring price.

```kotlin
// Before (bug)
product.displayPrice  // "Free" or "$0.00"
product.price         // 0.0

// After (fixed)
product.displayPrice  // "$9.99" (base recurring price)
product.price         // 9.99

// Free trial info is still available in subscriptionOffers
product.subscriptionOffers[0].displayPrice   // "$0.00"
product.subscriptionOffers[0].paymentMode    // FreeTrial
```

## New Types

| Type | Platform | Description |
|------|----------|-------------|
| `WinBackOfferInputIOS` | iOS | Win-back offer input for iOS 18+ |
| `PromotionalOfferJWSInputIOS` | iOS | JWS promotional offer for iOS 15+ |
| `ProductStatusAndroid` | Android | Product fetch status codes |
| `SubResponseCodeAndroid` | Android | Sub-response codes for errors |
| `BillingResultAndroid` | Android | Extended billing result with sub-response |

## OpenIAP Versions

| Package | Version |
|---------|---------|
| openiap-gql | 1.3.14 |
| openiap-google | 1.3.25 |
| openiap-apple | 1.3.12 |

## Installation

```kotlin
implementation("io.github.hyochan:kmp-iap:1.3.2")
```

## References

- [OpenIAP gql v1.3.14 / google v1.3.25 / apple v1.3.12 Release Notes](https://www.openiap.dev/docs/updates/notes#gql-1-3-14-google-1-3-25-apple-1-3-12)
- [OpenIAP gql v1.3.13 Release Notes](https://www.openiap.dev/docs/updates/notes#gql-1-3-13-google-1-3-24-apple-1-3-11)
- [1.3.0 Release Notes](/blog/release-1.3.0) - Previous release
